<!-- KOVER ANTI-GRAVITY GENERATED CODE -->
<style>

   /* Tilda Adaptive Wrapper */
   .kover-mobile-wrapper {
       width: 100%;
       min-height: 100vh;
       background: #111; /* Default dark background matching content */
       position: relative;
       overflow-x: hidden;
   }
   
   @media (min-width: 768px) {
       body {
           background-color: #f4f5f7; /* Desktop background */
           display: flex;
           justify-content: center;
       }
       .kover-mobile-wrapper {
           max-width: 440px;
           margin: 0 auto; /* Center */
           box-shadow: 0 0 50px rgba(0,0,0,0.2);
           border-left: 1px solid #333;
           border-right: 1px solid #333;
       }
       /* Fix Fixed Elements to stick to wrapper */
       .m-float-cta {
           position: absolute !important; 
           /* This is tricky. Fixed elements are relative to viewport. 
              To make them relative to container, we need transforms, 
              but that breaks other fixed logic. 
              Alternative: restrict their max-width */
           max-width: 400px;
           left: 50% !important;
           transform: translateX(-50%) !important;
           bottom: 20px !important;
       }
       
       /* Fix Popups */
       .popup-overlay {
           /* Ensure popup overlay covers only the wrapper? 
              Usually popups are full screen. 
              If we want desktop experience, full screen popup is fine. 
              But center the content. */
       }
   }


        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap');

        :root {
            --brand-cyan: #29B6F6;
            --brand-lime: #BDFF00;
            --brand-dark: #111111;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            -webkit-font-smoothing: antialiased;
            background-color: var(--brand-dark);
            color: white;
            overflow-x: hidden;
            width: 100%;
        }

        /* Full Screen Hero optimized for Mobile */
        .m-hero {
            position: relative;
            height: 100svh;
            /* Perfect mobile height */
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            background: url('https://kovertrip.b-cdn.net/%D0%94%D0%B2%D1%83%D1%85%D0%B4%D0%BD%D0%B5%D0%B2%D0%BA%D0%B0%20%D0%B2%20%D0%90%D0%BB%D1%8C%D0%BF%D1%8B/hero_bg.png') no-repeat center center/cover;
            padding-bottom: env(safe-area-inset-bottom, 20px);
            overflow: hidden;
            /* Cut off any potential overflow */
        }

        /* Better scrim gradient for readability */
        .m-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom,
                    rgba(0, 0, 0, 0.3) 0%,
                    rgba(0, 0, 0, 0) 30%,
                    rgba(0, 0, 0, 0.4) 60%,
                    rgba(0, 0, 0, 0.9) 100%);
            z-index: 1;
        }

        .m-header {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            z-index: 10;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .m-logo img {
            height: 32px;
            width: auto;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
        }

        .m-hero-content {
            position: relative;
            z-index: 5;
            padding: 24px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        /* Compact Badges Row */
        .m-badges {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 4px;
        }

        .m-badge {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 6px 12px;
            border-radius: 50px;
            font-size: 11px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .m-badge.accent {
            background: var(--brand-cyan);
            border-color: var(--brand-cyan);
            color: white;
            box-shadow: 0 4px 12px rgba(41, 182, 246, 0.4);
        }

        /* Typography optimized for small screens */
        .m-title {
            font-size: 36px;
            line-height: 0.95;
            font-weight: 800;
            text-transform: uppercase;
            margin: 0;
            letter-spacing: -1px;
        }

        .m-title span {
            color: var(--brand-cyan);
        }

        .m-subtitle {
            font-size: 15px;
            line-height: 1.4;
            color: rgba(255, 255, 255, 0.9);
            margin: 0;
            max-width: 90%;
        }

        /* Sticky-feeling CTA */
        .m-cta-btn {
            background: var(--brand-cyan);
            color: white;
            border: none;
            width: 100%;
            padding: 18px;
            border-radius: 16px;
            font-size: 16px;
            font-weight: 700;
            text-transform: uppercase;
            margin-top: 16px;
            box-shadow: 0 8px 24px rgba(41, 182, 246, 0.35);
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
            transition: transform 0.2s;
        }

        .m-cta-btn:active {
            transform: scale(0.98);
        }
    

        /* Mobile Program - Premium Image Cards (Story Style) */
        .m-program-section {
            background: #111;
            padding: 40px 0;
            overflow: hidden;
            font-family: 'Montserrat', sans-serif;
            position: relative;
        }

        .m-section-header {
            padding: 0 20px 24px;
        }

        .m-h2 {
            font-size: 28px;
            font-weight: 800;
            color: #fff;
            margin: 0;
            letter-spacing: -0.5px;
        }

        .m-sub {
            color: #888;
            font-size: 14px;
            margin-top: 5px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* Highlight icon */
        .m-sub-icon {
            color: #29B6F6;
            font-size: 16px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                opacity: 0.5;
                transform: scale(1);
            }

            50% {
                opacity: 1;
                transform: scale(1.2);
            }

            100% {
                opacity: 0.5;
                transform: scale(1);
            }
        }

        .m-prog-scroll {
            display: flex;
            overflow-x: auto;
            gap: 12px;
            padding: 0 20px 40px;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }

        .m-prog-scroll::-webkit-scrollbar {
            display: none;
        }

        .m-story-card {
            flex: 0 0 280px;
            height: 420px;
            border-radius: 20px;
            scroll-snap-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            background: #222;
            cursor: pointer;
            transition: transform 0.2s;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .m-story-card:active {
            transform: scale(0.98);
        }

        .m-story-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .m-story-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 70%;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.95) 0%, rgba(0, 0, 0, 0.6) 60%, transparent 100%);
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 20px;
        }

        .m-story-tag {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(5px);
            color: white;
            font-size: 10px;
            font-weight: 700;
            padding: 4px 10px;
            border-radius: 50px;
            align-self: flex-start;
            margin-bottom: 12px;
            text-transform: uppercase;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .m-photo-count {
            position: absolute;
            bottom: 16px;
            right: 16px;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 4px;
            z-index: 10;
        }

        .m-story-tag.lime {
            background: #BDFF00;
            color: black;
            border: none;
        }

        .m-story-tag.orange {
            background: #FF6B35;
            border: none;
        }

        .m-story-title {
            font-size: 24px;
            font-weight: 800;
            color: white;
            margin: 0 0 6px 0;
            line-height: 1.1;
        }

        /* Improved Affordance Button */
        .m-story-btn {
            margin-top: 12px;
            background: #29B6F6;
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 12px;
            font-size: 13px;
            font-weight: 700;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            width: fit-content;
            box-shadow: 0 4px 12px rgba(41, 182, 246, 0.3);
        }

        .m-story-desc {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.4;
            margin: 0;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            margin-bottom: 4px;
        }

        /* POPUP STYLES */
        .m-popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(15px);
            z-index: 1000;
            /* Higher than header */
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.25s ease;
            display: flex;
            align-items: flex-end;
            /* Sheet style */
        }

        .m-popup-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        /* Sheet container */
        .m-popup-sheet {
            background: #1A1A1A;
            width: 100%;
            height: 92vh;
            /* Takes up most of screen */
            border-radius: 24px 24px 0 0;
            transform: translateY(100%);
            transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
            overflow-y: auto;
            position: relative;
            display: flex;
            flex-direction: column;
            box-shadow: 0 -10px 40px rgba(0, 0, 0, 0.5);
        }

        .m-popup-overlay.active .m-popup-sheet {
            transform: translateY(0);
        }

        /* Drag Handle */
        .m-sheet-header {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 20px;
            z-index: 10;
            display: flex;
            justify-content: center;
            padding-top: 8px;
        }

        .m-sheet-handle {
            width: 40px;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 100px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        /* GALLARY SWIPER */
        .m-gallery-container {
            width: 100%;
            height: 350px;
            /* Big image area */
            position: relative;
            flex-shrink: 0;
            background: #000;
        }

        .m-gallery-scroll {
            display: flex;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            height: 100%;
            scrollbar-width: none;
            -webkit-overflow-scrolling: touch;
        }

        .m-gallery-scroll::-webkit-scrollbar {
            display: none;
        }

        .m-gallery-img {
            flex: 0 0 100%;
            width: 100%;
            height: 100%;
            object-fit: cover;
            scroll-snap-align: center;
        }

        .m-gallery-dots {
            position: absolute;
            bottom: 12px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 6px;
            pointer-events: none;
        }

        .m-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.4);
            transition: all 0.2s;
        }

        .m-dot.active {
            background: #fff;
            transform: scale(1.2);
        }

        .m-popup-content {
            padding: 24px 24px 100px;
            /* Extra padding for bottom scroll */
            margin-top: 0;
            position: relative;
            z-index: 5;
            background: #1A1A1A;
            /* To cover bottom of image if rounded */
            border-radius: 24px 24px 0 0;
            min-height: 500px;
            box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.5);
        }



        .m-popup-title {
            font-size: 28px;
            font-weight: 800;
            color: white;
            margin: 30px 0 8px 0;
            line-height: 1.05;
        }

        .m-popup-subtitle {
            font-size: 14px;
            color: #888;
            margin-bottom: 16px;
            font-weight: 500;
        }

        /* -- Mini Article Styles -- */
        .m-article-text {
            font-size: 16px;
            line-height: 1.6;
            color: #d0d0d0;
            margin-bottom: 24px;
        }

        .m-article-h {
            font-size: 18px;
            font-weight: 700;
            color: white;
            margin: 24px 0 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .m-article-tag {
            background: #333;
            color: #ccc;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
            margin-right: 8px;
            margin-bottom: 8px;
        }

        /* Booking / Reviews */
        .m-booking-block {
            background: #252525;
            border-radius: 16px;
            padding: 16px;
            margin: 20px 0;
            border: 1px solid #333;
        }

        .m-rating-row {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-bottom: 8px;
        }

        .m-star {
            color: #FFD700;
        }

        .m-rating-val {
            background: #003580;
            /* Booking blue style */
            color: white;
            font-weight: 700;
            padding: 4px 8px;
            border-radius: 6px 6px 6px 0;
            font-size: 14px;
        }

        .m-quote-card {
            background: #222;
            border-left: 4px solid #29B6F6;
            padding: 16px;
            font-style: italic;
            color: #bbb;
            margin: 16px 0;
            border-radius: 0 12px 12px 0;
            font-size: 15px;
        }

        .m-g-review {
            display: flex;
            gap: 12px;
            background: #222;
            padding: 12px;
            border-radius: 12px;
            margin-bottom: 12px;
        }

        .m-g-avatar {
            width: 40px;
            height: 40px;
            background: #666;
            border-radius: 50%;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }

        .m-g-name {
            font-weight: 700;
            color: white;
            font-size: 14px;
            margin-bottom: 2px;
        }

        .m-g-stars {
            color: #FFD700;
            font-size: 12px;
            margin-bottom: 4px;
        }

        .m-g-text {
            font-size: 13px;
            color: #aaa;
            line-height: 1.4;
        }

        .m-popup-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            background: #29B6F6;
            color: white;
            font-weight: 700;
            text-decoration: none;
            padding: 14px;
            border-radius: 12px;
            margin-top: 10px;
            text-transform: uppercase;
            font-size: 14px;
        }

        .m-popup-link.booking {
            background: #003580;
            /* Booking.com color */
        }

        .m-popup-link.secondary {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Close Button Overlay */
        .m-close-round {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            z-index: 20;
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .m-sticky-close {
            background: #333;
            color: white;
            border: none;
            width: 100%;
            padding: 16px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 16px;
            text-transform: uppercase;
            margin-top: 30px;
        }

        /* Video Player Styles */
        .m-video-responsive {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%;
            /* 16:9 Aspect Ratio */
            height: 0;
            overflow: hidden;
            border-radius: 12px;
            background: #000;
            margin-top: 24px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .m-video-responsive video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
            object-fit: cover;
        }

        .play-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
            pointer-events: none;
        }

        .play-icon {
            width: 50px;
            height: 50px;
            background: #BDFF00;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .m-video-responsive.playing .play-overlay {
            opacity: 0;
            transform: scale(1.1);
        }

        /* === PREMIUM VIDEO CARD STYLE (From Reviews.html) === */
        .m-card-video {
            width: 100%;
            max-width: 320px;
            /* Limit width like a card */
            height: 480px;
            /* Fixed height ~ Vertical 9:16-ish */
            margin: 0 auto 24px;
            /* Center it */
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            background: #000;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .m-video-cover {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            position: absolute;
            top: 0;
            left: 0;
        }

        .m-video-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 50%;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
            pointer-events: none;
            transition: opacity 0.3s;
            z-index: 3;
            display: flex;
            align-items: flex-end;
            padding: 20px;
        }

        .m-video-caption {
            color: white;
            font-size: 14px;
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .m-play-btn {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 64px;
            height: 64px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(12px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 4;
            pointer-events: none;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .m-card-video.playing .m-play-btn,
        .m-card-video.playing .m-video-overlay,
        .m-card-video.playing .m-video-poster {
            opacity: 0;
        }

        .m-play-icon {
            width: 24px;
            height: 24px;
            fill: white;
            margin-left: 4px;
            /* Optical centering */
        }
    

        /* --- –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò --- */
        .m-reviews-section {
            background: #F4F5F7;
            padding: 40px 0;
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, 'Inter', sans-serif;
        }

        .m-reviews-header {
            padding: 0 20px;
            margin-bottom: 24px;
        }

        .m-reviews-title {
            font-size: 28px;
            font-weight: 800;
            color: #1A1A1A;
            margin: 0;
        }

        .m-reviews-subtitle {
            font-size: 14px;
            color: #666;
            margin-top: 8px;
        }

        /* Stories-like Loop */
        .m-reviews-scroll {
            display: flex;
            gap: 16px;
            overflow-x: auto;
            padding: 0 20px 40px;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }

        .m-reviews-scroll::-webkit-scrollbar {
            display: none;
        }

        /* === –ö–ê–†–¢–û–ß–ö–ê –í–ò–î–ï–û === */
        .m-review-card {
            min-width: 280px;
            width: 280px;
            height: 400px;
            background: #000;
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
            scroll-snap-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);
            cursor: pointer;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        /* 1. VIDEO LAYER (Bottom) */
        .m-review-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }

        /* 2. POSTER IMAGE LAYER (Middle) - Using IMG tag for reliable loading */
        .m-review-poster-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 2;
            transition: opacity 0.3s;
            background: #222;
            /* Fallback color */
        }

        /* 3. OVERLAY GRADIENT (Top) */
        .m-review-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 60%;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
            pointer-events: none;
            z-index: 3;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 20px;
            transition: opacity 0.3s;
        }

        .m-review-author {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
        }

        .m-review-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #BA68C8;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .m-review-name {
            font-weight: 700;
            font-size: 15px;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .m-review-quote {
            font-size: 13px;
            line-height: 1.4;
            color: #ddd;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }

        /* 4. PLAY BUTTON (Top) */
        .m-review-play {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 56px;
            height: 56px;
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 4;
            /* Highest */
            pointer-events: none;
            transition: all 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .m-play-icon {
            width: 20px;
            height: 20px;
            fill: white;
            margin-left: 2px;
        }

        /* STATE: PLAYING */
        /* Hide poster, overlay, and button when playing */
        .m-review-card.playing .m-review-poster-img,
        .m-review-card.playing .m-review-overlay,
        .m-review-card.playing .m-review-play {
            opacity: 0 !important;
            pointer-events: none;
        }
    

        .m-org-section {
            background: #111;
            padding: 40px 20px 100px;
            /* Extra bottom padding for floating btn */
            color: #fff;
            position: relative;
        }

        .m-org-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .m-org-title {
            font-size: 28px;
            font-weight: 800;
            margin: 0;
            letter-spacing: -0.5px;
        }

        /* Cards */
        .m-info-card {
            background: #222;
            padding: 24px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .m-info-card.accent {
            background: linear-gradient(135deg, #222 0%, #2a2a2a 100%);
            border: 1px solid #29B6F6;
            position: relative;
            overflow: hidden;
        }

        /* Subtle glow for accent card */
        .m-info-card.accent::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(41, 182, 246, 0.1) 0%, transparent 70%);
            pointer-events: none;
        }

        .m-info-h {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
        }

        .m-price-tag {
            background: #29B6F6;
            color: white;
            padding: 6px 14px;
            border-radius: 50px;
            font-size: 15px;
            font-weight: 800;
            box-shadow: 0 4px 10px rgba(41, 182, 246, 0.3);
        }

        .m-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .m-list li {
            margin-bottom: 14px;
            padding-left: 28px;
            position: relative;
            font-size: 15px;
            color: #ccc;
            line-height: 1.5;
        }

        .m-list li::before {
            content: '';
            position: absolute;
            left: 0;
            top: 8px;
            width: 6px;
            height: 6px;
            background: #444;
            border-radius: 50%;
        }

        .m-list li.check::before {
            background: transparent;
            content: '‚úì';
            color: #29B6F6;
            font-weight: 900;
            font-size: 16px;
            top: -1px;
            left: -2px;
        }

        .m-info-text {
            font-size: 15px;
            line-height: 1.6;
            color: #bbb;
        }

        /* Floating Start Button */
        .m-float-cta {
            position: fixed;
            bottom: 24px;
            left: 20px;
            right: 20px;
            background: #29B6F6;
            color: white;
            padding: 18px;
            border-radius: 16px;
            border: none;
            font-weight: 800;
            text-transform: uppercase;
            font-size: 16px;
            box-shadow: 0 10px 40px rgba(41, 182, 246, 0.4);
            z-index: 100;
            text-align: center;
            cursor: pointer;
            backdrop-filter: blur(5px);
            transition: transform 0.2s;
        }

        .m-float-cta:active {
            transform: scale(0.96);
        }

        .m-float-spacer {
            height: 40px;
        }
    

        :root {
            --color-bg: #f2f2f7;
            --color-card: #ffffff;
            --color-text-main: #1d1d1f;
            --color-text-second: #86868b;
            --color-accent: #007aff;
            --color-error: #ff3b30;
            --color-success: #34c759;
            --border-radius: 20px;
            --border-color: #d1d1d6;
            --border-light: #e5e5ea;
        }

        /* SCOPED RESET - Only affects widget elements */
        #widget-overlay *,
        #widget-overlay *::before,
        #widget-overlay *::after {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        /* EXTERNAL RESETS for Plugins (Flatpickr, Rolldate) */
        .flatpickr-calendar,
        .flatpickr-calendar * {
            box-sizing: border-box;
        }

        .rolldate-container,
        .rolldate-container * {
            box-sizing: border-box;
        }

        /* KEYFRAMES GLOBAL */
        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        @-webkit-keyframes spin {
            0% {
                -webkit-transform: rotate(0deg);
            }

            100% {
                -webkit-transform: rotate(360deg);
            }
        }

        /* --- BUTTON HIDDEN (Triggered via hash) --- */
        .open-modal-btn {
            display: none;
        }

        /* --- MODAL OVERLAY --- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(8px);
            z-index: 10000;
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            /* Font reset for the widget context */
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            color: var(--color-text-main);
            line-height: 1.5;
        }

        .modal-overlay.active {
            display: flex;
            opacity: 1;
        }

        /* --- WIDGET CONTAINER (FIXED HEIGHT POPUP) --- */
        .widget-container {
            width: 100%;
            max-width: 480px;
            height: 600px;
            background: #fff;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
            transform: scale(0.95);
            transition: transform 0.3s ease;
            text-align: left;
        }

        .modal-overlay.active .widget-container {
            transform: scale(1);
        }

        /* --- HEADER --- */
        .widget-header {
            flex-shrink: 0;
            padding: 16px 24px;
            background: rgba(255, 255, 255, 0.95);
            border-bottom: 1px solid var(--border-light);
            z-index: 20;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .close-btn {
            width: 32px;
            height: 32px;
            background: #f2f2f7;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: #8e8e93;
            font-weight: 600;
            transition: 0.2s;
        }

        .close-btn:hover {
            color: #1d1d1f;
            background: #e5e5ea;
        }

        .stepper {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .step-item {
            display: flex;
            align-items: center;
            gap: 6px;
            opacity: 0.4;
            transition: 0.3s;
        }

        .step-item.active {
            opacity: 1;
        }

        .step-item span {
            font-size: 14px;
            font-weight: 600;
            display: none;
        }

        .step-item.active span {
            display: block;
            color: var(--color-text-main);
        }

        .step-circle {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: 2px solid #c7c7cc;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            font-weight: 700;
            color: #8e8e93;
        }

        .step-item.active .step-circle {
            border-color: var(--color-accent);
            background: var(--color-accent);
            color: #fff;
        }

        .step-item.completed .step-circle {
            background: var(--color-success);
            border-color: var(--color-success);
            color: #fff;
            content: '‚úì';
        }

        /* --- MAIN SCROLLABLE AREA --- */
        .widget-body {
            position: relative;
            flex: 1;
            overflow: hidden;
            background: #fff;
        }

        .step-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow-y: auto;
            padding: 24px;
            padding-bottom: 20px;
            background: #fff;
            transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1), opacity 0.4s;
            opacity: 0;
            transform: translateX(50px);
            display: none;
        }

        .step-slide.active {
            opacity: 1;
            transform: translateX(0);
            display: block;
        }

        .step-slide>*:last-child {
            margin-bottom: 20px;
        }

        .slide-enter-next {
            animation: slideInRight 0.4s forwards;
        }

        .slide-exit-next {
            animation: slideOutLeft 0.4s forwards;
            z-index: 0;
        }

        .slide-enter-prev {
            animation: slideInLeft 0.4s forwards;
        }

        .slide-exit-prev {
            animation: slideOutRight 0.4s forwards;
            z-index: 0;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOutLeft {
            from {
                transform: translateX(0);
                opacity: 1;
            }

            to {
                transform: translateX(-30%);
                opacity: 0;
            }
        }

        @keyframes slideInLeft {
            from {
                transform: translateX(-30%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }

            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }

        /* --- STICKY FOOTER --- */
        .widget-footer {
            flex-shrink: 0;
            padding: 16px 24px;
            background: #fff;
            border-top: 1px solid var(--border-light);
            z-index: 20;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        /* --- UI ELEMENTS (Scoped) --- */
        .widget-container h2 {
            margin: 0 0 24px 0;
            font-size: 24px;
            font-weight: 700;
            letter-spacing: -0.5px;
            color: var(--color-text-main);
        }

        .plan-card {
            border: 2px solid var(--border-light);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
        }

        .plan-card:hover {
            border-color: #b0b0b8;
        }

        .plan-card.selected {
            border-color: var(--color-accent);
            background: rgba(0, 122, 255, 0.03);
        }

        .radio-circle {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid #d1d1d6;
            margin-top: 2px;
            position: relative;
            margin-right: 12px;
            flex-shrink: 0;
        }

        .plan-card.selected .radio-circle {
            border-color: var(--color-accent);
            background: var(--color-accent);
        }

        .plan-card.selected .radio-circle::after {
            content: '';
            position: absolute;
            top: 5px;
            left: 5px;
            width: 6px;
            height: 6px;
            background: #fff;
            border-radius: 50%;
        }

        .counter-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 24px 0;
        }

        .counter-label {
            font-size: 16px;
            font-weight: 600;
        }

        .counter-ctrl {
            background: #f2f2f7;
            border-radius: 12px;
            display: flex;
            align-items: center;
            padding: 4px;
        }

        .c-btn {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #fff;
            border-radius: 8px;
            font-size: 20px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            user-select: none;
        }

        .c-btn:active {
            transform: scale(0.95);
        }

        .c-val {
            width: 40px;
            text-align: center;
            font-weight: 600;
            font-size: 16px;
        }

        .btn-primary {
            width: 100%;
            padding: 16px;
            background: var(--color-accent);
            color: #fff;
            border: none;
            border-radius: 14px;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.2s;
        }

        .btn-primary:active {
            transform: scale(0.98);
        }

        .btn-primary:disabled {
            background: #e5e5ea;
            color: #8e8e93;
            cursor: not-allowed;
        }

        .btn-secondary {
            width: 100%;
            padding: 14px;
            background: transparent;
            color: var(--color-accent);
            border: none;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
        }

        .btn-secondary:hover {
            text-decoration: underline;
        }

        .form-group {
            margin-bottom: 16px;
            position: relative;
        }

        .form-label {
            font-size: 13px;
            font-weight: 500;
            color: #86868b;
            margin-bottom: 6px;
            display: block;
        }

        .inp-field {
            width: 100%;
            height: 50px;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 0 16px;
            font-size: 16px;
            outline: none;
            transition: 0.2s;
            -webkit-appearance: none;
            appearance: none;
            background: #fff;
        }

        .inp-field:focus {
            border-color: var(--color-accent);
            box-shadow: 0 0 0 4px rgba(0, 122, 255, 0.1);
        }

        .inp-field.error {
            border-color: var(--color-error);
            background: #fff0f0;
        }

        .input-error-msg {
            color: var(--color-error);
            font-size: 11px;
            margin-top: 4px;
            display: none;
        }

        .inp-field.error+.input-error-msg {
            display: block;
        }

        .stripe-box {
            padding: 14px;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            background: #fff;
        }

        .stripe-box:focus-within {
            border-color: var(--color-accent);
            box-shadow: 0 0 0 4px rgba(0, 122, 255, 0.1);
        }

        /* PAYMENT LOADER */
        #payment-loader {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #fff;
            z-index: 50;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        #payment-loader.visible {
            opacity: 1;
            pointer-events: auto;
        }

        .vibey-loader {
            width: 48px;
            height: 48px;
            border: 4px solid #e5e5ea;
            border-top-color: var(--color-accent);
            border-radius: 50%;
            -webkit-animation: spin 1s linear infinite;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
            /* Ensure it renders */
            display: block;
            box-sizing: border-box;
        }

        /* Mobile */
        @media (max-width: 600px) {
            .modal-overlay {
                align-items: flex-end;
                padding: 0;
            }

            .widget-container {
                max-height: 85vh;
                height: 85vh;
                border-radius: 24px 24px 0 0;
                transform: translateY(100%);
                max-width: 100%;
            }

            .modal-overlay.active .widget-container {
                transform: translateY(0);
            }
        }

        .shake {
            animation: shake 0.4s;
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0)
            }

            25% {
                transform: translateX(-5px)
            }

            75% {
                transform: translateX(5px)
            }
        }

        /* PLUGIN Z-INDEX FIXES */
        .flatpickr-calendar {
            z-index: 20000 !important;
        }

        .iti__country-list {
            z-index: 20000 !important;
        }

        .rolldate-container {
            z-index: 20000 !important;
        }

        /* Rolldate z-index */

        .iti {
            width: 100%;
            display: block;
        }
    
</style>

<!-- EXTERNAL DEPENDENCIES -->
<script src="https://js.stripe.com/v3/"></script>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/css/intlTelInput.css">
<script src="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/intlTelInput.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ru.js"></script>

<div class="kover-mobile-wrapper">
<!-- SOURCE: –î–≤—É—Ö–¥–Ω–µ–≤–∫–∞ –≤ –ê–ª—å–ø—ã/Mobile_Version/01_Hero_Mobile.html -->


    <div class="m-hero">
        <div class="m-header">
            <a href="/" class="m-logo">
                <img src="https://static.tildacdn.com/tild6534-3663-4838-b563-336463663732/Kover_travel_logo.svg"
                    alt="Kover Logo">
            </a>
        </div>

        <div class="m-hero-content">
            <div class="m-badges">
                <div class="m-badge">&#128197; 28 —Ñ–µ–≤ - 01 –º–∞—Ä</div>
                <div class="m-badge accent">–í—Å—ë –≤–∫–ª—é—á–µ–Ω–æ: 4990 KC</div>
            </div>

            <h1 class="m-title">–ê–ª—å–ø—ã: <span>–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞</span> –∑–∞ 48 —á–∞—Å–æ–≤</h1>

            <p class="m-subtitle">
                –ú—ã –≤–∑—è–ª–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ–±—è: —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä, –æ—Ç–µ–ª—å 4*, SPA –∏ –ø—Ä–æ–≥—Ä–∞–º–º—É. <br>–¢–µ–±–µ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è
                —Ç–æ–ª—å–∫–æ —Å–æ–±—Ä–∞—Ç—å —á–µ–º–æ–¥–∞–Ω.
            </p>

            <button onclick="openWidget()" class="m-cta-btn">–ó–∞–Ω—è—Ç—å –º–µ—Å—Ç–æ</button>
        </div>
    </div>


<!-- SOURCE: –î–≤—É—Ö–¥–Ω–µ–≤–∫–∞ –≤ –ê–ª—å–ø—ã/Mobile_Version/02_Program_Mobile.html -->


    <div class="m-program-section">
        <div class="m-section-header">
            <h2 class="m-h2">–ü—Ä–æ–≥—Ä–∞–º–º–∞ —Ç—É—Ä–∞</h2>
            <div class="m-sub">
                <span class="m-sub-icon">üëÜ</span> –¢–∞–ø–Ω–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –¥–µ—Ç–∞–ª–∏
            </div>
        </div>

        <div class="m-prog-scroll">

            <!-- Card 1: Hallstatt -->
            <div class="m-story-card" onclick="openPopup('hallstatt')">
                <img src="https://kovertrip.b-cdn.net/%D0%94%D0%B2%D1%83%D1%85%D0%B4%D0%BD%D0%B5%D0%B2%D0%BA%D0%B0%20%D0%B2%20%D0%90%D0%BB%D1%8C%D0%BF%D1%8B/AutoSync/hallstatt_best/hallstatt_best_1.jpg"
                    class="m-story-img" alt="Hallstatt">
                <div class="m-story-overlay">
                    <span class="m-story-tag">–ê–≤—Å—Ç—Ä–∏—è</span>
                    <h3 class="m-story-title">–ì–∞–ª—å—à—Ç–∞—Ç</h3>
                    <p class="m-story-desc">–£–≤–∏–¥–∏–º –∑–Ω–∞–º–µ–Ω–∏—Ç—É—é –æ—Ç–∫—Ä—ã—Ç–∫—É –±–µ–∑ —Ç–æ–ª–ø —Ç—É—Ä–∏—Å—Ç–æ–≤. –≠–∫—Å–∫–ª—é–∑–∏–≤.</p>
                    <div class="m-story-btn">–°–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É &rarr;</div>
                </div>
                <!-- Data for Popup -->
                <div class="popup-data" id="data-hallstatt" style="display:none;">
                    <div class="title">–ú–∞–≥–∏—è –ì–∞–ª—å—à—Ç–∞—Ç–∞</div>
                    <div class="subtitle">–Æ–ù–ï–°–ö–û ¬∑ –ò—Å—Ç–æ—Ä–∏—è ¬∑ –§–æ—Ç–æ—Å–µ—Å—Å–∏—è</div>
                    <div class="images">
                        <img
                            src="https://kovertrip.b-cdn.net/%D0%94%D0%B2%D1%83%D1%85%D0%B4%D0%BD%D0%B5%D0%B2%D0%BA%D0%B0%20%D0%B2%20%D0%90%D0%BB%D1%8C%D0%BF%D1%8B/AutoSync/hallstatt_best/hallstatt_best_1.jpg">
                        <img
                            src="https://kovertrip.b-cdn.net/%D0%94%D0%B2%D1%83%D1%85%D0%B4%D0%BD%D0%B5%D0%B2%D0%BA%D0%B0%20%D0%B2%20%D0%90%D0%BB%D1%8C%D0%BF%D1%8B/hall5.jpg">
                        <img
                            src="https://kovertrip.b-cdn.net/%D0%94%D0%B2%D1%83%D1%85%D0%B4%D0%BD%D0%B5%D0%B2%D0%BA%D0%B0%20%D0%B2%20%D0%90%D0%BB%D1%8C%D0%BF%D1%8B/AutoSync/hallstatt_best/hallstatt_best_4.jpg">
                        <img
                            src="https://kovertrip.b-cdn.net/%D0%94%D0%B2%D1%83%D1%85%D0%B4%D0%BD%D0%B5%D0%B2%D0%BA%D0%B0%20%D0%B2%20%D0%90%D0%BB%D1%8C%D0%BF%D1%8B/AutoSync/hallstatt_best/hallstatt_best_5.jpg">
                    </div>
                    <div class="content">
                        <p class="m-article-text">
                            <b>–ü—Ä–æ–±–ª–µ–º–∞ –ì–∞–ª—å—à—Ç–∞—Ç–∞ ‚Äî —Ç–æ–ª–ø—ã —Ç—É—Ä–∏—Å—Ç–æ–≤.</b> –û–±—ã—á–Ω–æ –∑–¥–µ—Å—å –Ω–µ –ø—Ä–æ—Ç–æ–ª–∫–Ω—É—Ç—å—Å—è.
                            <br><br>
                            <b>–ù–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ:</b> –ú—ã –ø—Ä–∏–±—ã–≤–∞–µ–º –Ω–∞ —Ä–∞—Å—Å–≤–µ—Ç–µ. –í–µ—Å—å –≥–æ—Ä–æ–¥ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Ç–µ–±–µ. –¢–∏—à–∏–Ω–∞, —Ç—É–º–∞–Ω
                            –Ω–∞–¥
                            –æ–∑–µ—Ä–æ–º –∏ –ª–µ–±–µ–¥–∏. –¢—ã —É–≤–∏–¥–∏—à—å –∑–Ω–∞–º–µ–Ω–∏—Ç—É—é "–æ—Ç–∫—Ä—ã—Ç–∫—É", –ø–æ–∫–∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å—ã–ø–∞—é—Ç—Å—è.
                        </p>

                        <div class="m-article-h">üì∏ –¢–≤–æ–π –ª–∏—á–Ω—ã–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ</div>
                        <p class="m-article-text">
                            –ù–µ —Ç—Ä–∞—Ç—å –≤—Ä–µ–º—è –Ω–∞ —Å–µ–ª—Ñ–∏. –° –Ω–∞–º–∏ –µ–¥–µ—Ç –ø—Ä–æ—Ñ–∏, –∫–æ—Ç–æ—Ä—ã–π –∑–Ω–∞–µ—Ç –ª—É—á—à–∏–µ (–∏ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ) —Ä–∞–∫—É—Ä—Å—ã.
                            –¢—ã –ø–æ–ª—É—á–∏—à—å –∏–¥–µ–∞–ª—å–Ω—ã–µ –∫–∞–¥—Ä—ã, –≥–¥–µ —Ç—ã ‚Äî –≥–ª–∞–≤–Ω—ã–π –≥–µ—Ä–æ–π –Ω–∞ —Ñ–æ–Ω–µ –∏—Å—Ç–æ—Ä–∏–∏.
                            <br><i style="color:#888; font-size:12px;">(–û–±—ã—á–Ω–æ —Ç–∞–∫–∞—è —Å—ä–µ–º–∫–∞ —Å—Ç–æ–∏—Ç –æ—Ç 200‚Ç¨, —É –Ω–∞—Å ‚Äî
                                –≤–∫–ª—é—á–µ–Ω–æ).</i>
                        </p>

                        <div class="m-article-h">üß† –ë–µ–∑ —Å–∫—É—á–Ω—ã—Ö –ª–µ–∫—Ü–∏–π</div>
                        <p class="m-article-text">
                            –ù–∏–∫–∞–∫–∏—Ö "–ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞–ª–µ–≤–æ, –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–æ". –¢–æ–ª—å–∫–æ –∂–∏–≤—ã–µ –∏—Å—Ç–æ—Ä–∏–∏: –ø–æ—á–µ–º—É —Å–æ–ª—å –±—ã–ª–∞
                            –¥–æ—Ä–æ–∂–µ –∑–æ–ª–æ—Ç–∞ –∏ –∫–∞–∫ –ª—é–¥–∏ –∂–∏–ª–∏ –∑–¥–µ—Å—å 7000 –ª–µ—Ç –Ω–∞–∑–∞–¥.
                        </p>

                        <div class="m-quote-card">
                            "–ì–∞–ª—å—à—Ç–∞—Ç —É—Ç—Ä–æ–º ‚Äî —ç—Ç–æ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –¥—Ä—É–≥–∞—è –ø–ª–∞–Ω–µ—Ç–∞. –¢–∏—à–∏–Ω–∞, —Ç—É–º–∞–Ω –Ω–∞–¥ –æ–∑–µ—Ä–æ–º –∏ –ª–µ–±–µ–¥–∏. –≠—Ç–æ
                            —Å—Ç–æ–∏—Ç —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø—Ä–æ—Å–Ω—É—Ç—å—Å—è –ø–æ—Ä–∞–Ω—å—à–µ!"
                        </div>
                    </div>
                </div>
            </div>

            <!-- Card 2: Sledding -->
            <div class="m-story-card" onclick="openPopup('sledding')">
                <img src="https://kovertrip.b-cdn.net/%D0%94%D0%B2%D1%83%D1%85%D0%B4%D0%BD%D0%B5%D0%B2%D0%BA%D0%B0%20%D0%B2%20%D0%90%D0%BB%D1%8C%D0%BF%D1%8B/sani4.jpg"
                    class="m-story-img" alt="Sledding">
                <div class="m-story-overlay">
                    <span class="m-story-tag lime">–≠–∫—à–Ω</span>
                    <h3 class="m-story-title">14 –ö–ú –°–∞–Ω–µ–π</h3>
                    <p class="m-story-desc">14 –∫–º —Å–Ω–µ–∂–Ω–æ–≥–æ –¥—Ä–∞–π–≤–∞. –¢–∞–∫–æ–≥–æ –Ω–µ—Ç –±–æ–ª—å—à–µ –Ω–∏–≥–¥–µ –≤ –º–∏—Ä–µ.</p>
                    <div class="m-story-btn" style="background:#BDFF00; color:black;">–°–º–æ—Ç—Ä–µ—Ç—å &rarr;</div>
                </div>
                <div class="popup-data" id="data-sledding" style="display:none;">
                    <div class="title">14 –ö–ú –ê–¥—Ä–µ–Ω–∞–ª–∏–Ω–∞</div>
                    <div class="subtitle">Wildkogel Arena ¬∑ –ö–∞—Ç–∞–Ω–∏–µ –Ω–∞ –∑–∞–∫–∞—Ç–µ</div>
                    <div class="images">
                        <!-- First image removed as requested -->
                        <img
                            src="https://kovertrip.b-cdn.net/%D0%94%D0%B2%D1%83%D1%85%D0%B4%D0%BD%D0%B5%D0%B2%D0%BA%D0%B0%20%D0%B2%20%D0%90%D0%BB%D1%8C%D0%BF%D1%8B/sani1.jpg">
                        <img
                            src="https://kovertrip.b-cdn.net/%D0%94%D0%B2%D1%83%D1%85%D0%B4%D0%BD%D0%B5%D0%B2%D0%BA%D0%B0%20%D0%B2%20%D0%90%D0%BB%D1%8C%D0%BF%D1%8B/sani3.jpg">
                        <img
                            src="https://kovertrip.b-cdn.net/%D0%94%D0%B2%D1%83%D1%85%D0%B4%D0%BD%D0%B5%D0%B2%D0%BA%D0%B0%20%D0%B2%20%D0%90%D0%BB%D1%8C%D0%BF%D1%8B/sani2.jpg">
                        <img
                            src="https://kovertrip.b-cdn.net/%D0%94%D0%B2%D1%83%D1%85%D0%B4%D0%BD%D0%B5%D0%B2%D0%BA%D0%B0%20%D0%B2%20%D0%90%D0%BB%D1%8C%D0%BF%D1%8B/sani5.jpg">
                    </div>
                    <div class="content">
                        <p class="m-article-text">
                            <b>–ù–æ–≤—ã–π –≤–∑–≥–ª—è–¥ –Ω–∞ –∑–∏–º–Ω–∏–µ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è.</b> –≠—Ç–æ –Ω–µ –¥–µ—Ç—Å–∫–∞—è –≥–æ—Ä–∫–∞.
                            <br>–≠—Ç–æ Wildkogel Arena ‚Äî 14 –∫–∏–ª–æ–º–µ—Ç—Ä–æ–≤ —á–∏—Å—Ç–æ–≥–æ –¥—Ä–∞–π–≤–∞. –°–ø—É—Å–∫ –¥–ª–∏—Ç—Å—è –ø–æ—á—Ç–∏ —á–∞—Å!
                        </p>

                        <div class="m-article-h">üöÄ –ü–æ—á–µ–º—É —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ –∫—Ä—É—Ç–æ?</div>
                        <p class="m-article-text">
                            –¢—Ä–∞—Å—Å–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ —Ä–∞—Ç—Ä–∞–∫–∞–º–∏, –∫–∞–∫ –≥–æ—Ä–Ω–æ–ª—ã–∂–Ω—ã–π —Å–∫–ª–æ–Ω. –£–∫–ª–æ–Ω—ã –ø–ª–∞–≤–Ω—ã–µ, –ø–æ–≤–æ—Ä–æ—Ç—ã —à–∏—Ä–æ–∫–∏–µ.
                            <br><br>
                            –ú—ã —Å—Ç–∞—Ä—Ç—É–µ–º —Å –≤—ã—Å–æ—Ç—ã 2200–º. –í–æ–∫—Ä—É–≥ ‚Äî –ø–æ—Ç—Ä—è—Å–∞—é—â–∏–µ –≤–∏–¥—ã –ê–ª—å–ø, –∞ —Ç—ã –ª–µ—Ç–∏—à—å –ø–æ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π
                            —Å–Ω–µ–∂–Ω–æ–π —Ç—Ä–∞—Å—Å–µ.
                            <b>–≠—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤ –¥–µ—Ç—Å—Ç–≤–æ, –Ω–æ —Å –º–∞—Å—à—Ç–∞–±–æ–º –ê–ª—å–ø.</b>
                        </p>

                        <!-- Premium Video Card Container -->
                        <div class="m-card-video" onclick="toggleVideo(this)">
                            <video class="m-video-cover"
                                src="https://vz-244f7910-31a.b-cdn.net/028796b4-9dc9-4831-8d81-6ad81d91bded/play_720p.mp4"
                                playsinline webkit-playsinline loop muted preload="metadata">
                            </video>

                            <!-- Poster Layer (Explicit for instant load) -->
                            <div class="m-video-cover m-video-poster"
                                style="background-image: url('https://kovertrip.b-cdn.net/–î–≤—É—Ö–¥–Ω–µ–≤–∫–∞ –≤ –ê–ª—å–ø—ã/sani4.jpg'); background-size: cover; background-position: center; z-index: 2;">
                            </div>

                            <div class="m-video-overlay">
                                <div class="m-video-caption">Wildkogel Arena ¬∑ 14 –∫–º</div>
                            </div>

                            <div class="m-play-btn">
                                <svg class="m-play-icon" viewBox="0 0 24 24">
                                    <path d="M8 5v14l11-7z" />
                                </svg>
                            </div>
                        </div>

                        <div class="m-article-h">‚≠êÔ∏è –û—Ç–∑—ã–≤—ã</div>

                        <div class="m-g-review">
                            <div class="m-g-avatar">A</div>
                            <div>
                                <div class="m-g-name">Alexey K.</div>
                                <div class="m-g-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                                <div class="m-g-text">"–≠—Ç–æ –±—ã–ª–æ –ª—É—á—à–µ–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ –∑–∞ –≤—Å—é –ø–æ–µ–∑–¥–∫—É! –î—É–º–∞–ª –±—É–¥–µ—Ç —Å—Ç—Ä–∞—à–Ω–æ,
                                    –Ω–æ —Å–∞–Ω–∫–∏ –ª–µ–≥–∫–æ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è. –≠–º–æ—Ü–∏–∏ —á–µ—Ä–µ–∑ –∫—Ä–∞–π!"</div>
                            </div>
                        </div>

                        <div class="m-g-review">
                            <div class="m-g-avatar" style="background:#BDFF00; color:black;">M</div>
                            <div>
                                <div class="m-g-name">Maria S.</div>
                                <div class="m-g-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                                <div class="m-g-text">"–î–ª–∏–Ω–Ω–∞—è —Ç—Ä–∞—Å—Å–∞, –µ–¥–µ—à—å –∏ –µ–¥–µ—à—å! –û—á–µ–Ω—å –∫—Ä–∞—Å–∏–≤—ã–µ –≤–∏–¥—ã –Ω–∞ –¥–æ–ª–∏–Ω—É."
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Card 3: Hotel -->
            <div class="m-story-card" onclick="openPopup('hotel')">
                <img src="https://kovertrip.b-cdn.net/%D0%94%D0%B2%D1%83%D1%85%D0%B4%D0%BD%D0%B5%D0%B2%D0%BA%D0%B0%20%D0%B2%20%D0%90%D0%BB%D1%8C%D0%BF%D1%8B/805943864.jpg"
                    class="m-story-img" alt="Hotel">
                <div class="m-story-overlay">
                    <span class="m-story-tag">–†–µ–ª–∞–∫—Å</span>
                    <h3 class="m-story-title">–û—Ç–µ–ª—å & SPA</h3>
                    <p class="m-story-desc">–ó–∞—Å–ª—É–∂–µ–Ω–Ω—ã–π —Ä–µ–ª–∞–∫—Å –≤ —Ç–µ–ø–ª–æ–º –±–∞—Å—Å–µ–π–Ω–µ –∏ —Å–∞—É–Ω–∞—Ö.</p>
                    <div class="m-story-btn">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–æ–º–µ—Ä–∞ &rarr;</div>
                </div>
                <div class="popup-data" id="data-hotel" style="display:none;">
                    <div class="title">–ê–ª—å–ø–∏–π—Å–∫–∏–π –ö–æ–º—Ñ–æ—Ä—Ç</div>
                    <div class="subtitle">Hotel R√∂merhof 4* ¬∑ Fusch</div>
                    <div class="images">
                        <img
                            src="https://kovertrip.b-cdn.net/%D0%94%D0%B2%D1%83%D1%85%D0%B4%D0%BD%D0%B5%D0%B2%D0%BA%D0%B0%20%D0%B2%20%D0%90%D0%BB%D1%8C%D0%BF%D1%8B/805943864.jpg">
                        <img
                            src="https://kovertrip.b-cdn.net/%D0%94%D0%B2%D1%83%D1%85%D0%B4%D0%BD%D0%B5%D0%B2%D0%BA%D0%B0%20%D0%B2%20%D0%90%D0%BB%D1%8C%D0%BF%D1%8B/332735359.jpg">
                        <img
                            src="https://kovertrip.b-cdn.net/%D0%94%D0%B2%D1%83%D1%85%D0%B4%D0%BD%D0%B5%D0%B2%D0%BA%D0%B0%20%D0%B2%20%D0%90%D0%BB%D1%8C%D0%BF%D1%8B/514073860.jpg">
                        <img
                            src="https://kovertrip.b-cdn.net/%D0%94%D0%B2%D1%83%D1%85%D0%B4%D0%BD%D0%B5%D0%B2%D0%BA%D0%B0%20%D0%B2%20%D0%90%D0%BB%D1%8C%D0%BF%D1%8B/514073855.jpg">
                    </div>
                    <div class="content">

                        <div class="m-booking-block">
                            <div class="m-rating-row">
                                <div class="m-rating-val">8.9</div>
                                <span style="font-weight:bold; color:white;">–ü–æ—Ç—Ä—è—Å–∞—é—â–µ</span>
                                <span style="color:#888; font-size:12px;">300+ –æ—Ç–∑—ã–≤–æ–≤</span>
                            </div>
                            <p style="font-size:13px; color:#aaa; margin:0;">–†–µ–π—Ç–∏–Ω–≥ –Ω–∞ Booking.com</p>
                        </div>

                        <p class="m-article-text">
                            –ü–æ—Å–ª–µ –¥–Ω—è –≤ –≥–æ—Ä–∞—Ö —Ç–µ–ª—É –Ω—É–∂–µ–Ω –æ—Ç–¥—ã—Ö. –ú—ã –≤—ã–±—Ä–∞–ª–∏ <b>Hotel R√∂merhof</b> –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫ ‚Äî –∑–¥–µ—Å—å
                            –ª—É—á—à–∞—è SPA-–∑–æ–Ω–∞ –≤ —Ä–µ–≥–∏–æ–Ω–µ.
                        </p>

                        <div class="m-article-h">‚ùÑÔ∏è –ö–æ–Ω—Ç—Ä–∞—Å—Ç –æ—â—É—â–µ–Ω–∏–π</div>
                        <p class="m-article-text">
                            –ü—Ä–µ–¥—Å—Ç–∞–≤—å: –Ω–∞ —É–ª–∏—Ü–µ -5¬∞C, –∏–¥–µ—Ç —Å–Ω–µ–≥, –∞ —Ç—ã –ø–ª–∞–≤–∞–µ—à—å –≤ <b>–≥–æ—Ä—è—á–µ–º –æ—Ç–∫—Ä—ã—Ç–æ–º –±–∞—Å—Å–µ–π–Ω–µ
                                (+32¬∞C)</b>
                            —Å –≤–∏–¥–æ–º –Ω–∞ –≥–æ—Ä—ã. –≠—Ç–æ –æ—â—É—â–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏.
                        </p>

                        <div class="m-article-h">üõè –ö–æ–º—Ñ–æ—Ä—Ç 4*</div>
                        <p class="m-article-text">
                            –ú–∞–∫—Å–∏–º—É–º —É–¥–æ–±—Å—Ç–≤–∞. –ü—Ä–æ—Å—Ç–æ—Ä–Ω—ã–µ –Ω–æ–º–µ—Ä–∞, –∫—Ä–æ–≤–∞—Ç–∏ —Å –æ—Ä—Ç–æ–ø–µ–¥–∏—á–µ—Å–∫–∏–º–∏ –º–∞—Ç—Ä–∞—Å–∞–º–∏ –∏
                            –Ω–∞—Å—Ç–æ—è—â–∏–π "—Ñ–µ—Ä–º–µ—Ä—Å–∫–∏–π" –∑–∞–≤—Ç—Ä–∞–∫ (—à–≤–µ–¥—Å–∫–∏–π —Å—Ç–æ–ª), —Ä–∞–¥–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ —Ö–æ—á–µ—Ç—Å—è –ø—Ä–æ—Å–Ω—É—Ç—å—Å—è.
                        </p>

                        <a href="https://www.booking.com/hotel/at/romerhof-fusch.ru.html" target="_blank"
                            class="m-popup-link booking">
                            –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ Booking.com
                        </a>
                    </div>
                </div>
            </div>

            <!-- Card 4: Red Bull -->
            <div class="m-story-card" onclick="openPopup('redbull')">
                <img src="https://kovertrip.b-cdn.net/%D0%94%D0%B2%D1%83%D1%85%D0%B4%D0%BD%D0%B5%D0%B2%D0%BA%D0%B0%20%D0%B2%20%D0%90%D0%BB%D1%8C%D0%BF%D1%8B/bull1.jpg"
                    class="m-story-img" alt="Red Bull Hangar">
                <div class="m-story-overlay">
                    <span class="m-story-tag orange">–ú—É–∑–µ–π</span>
                    <h3 class="m-story-title">Hangar-7</h3>
                    <p class="m-story-desc">–ü—Ä–∏–∫–æ—Å–Ω–∏—Ç–µ—Å—å –∫ –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–º –±–æ–ª–∏–¥–∞–º F1 –∏ —Å–∞–º–æ–ª–µ—Ç–∞–º.</p>
                    <div class="m-story-btn" style="background:#FF6B35;">–£–∑–Ω–∞—Ç—å –¥–µ—Ç–∞–ª–∏ &rarr;</div>
                </div>
                <div class="popup-data" id="data-redbull" style="display:none;">
                    <div class="title">–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π Hangar-7</div>
                    <div class="subtitle">–ê–≤–∏–∞—Ü–∏—è ¬∑ F1 ¬∑ –ò—Å–∫—É—Å—Å—Ç–≤–æ</div>
                    <div class="images">
                        <img
                            src="https://kovertrip.b-cdn.net/%D0%94%D0%B2%D1%83%D1%85%D0%B4%D0%BD%D0%B5%D0%B2%D0%BA%D0%B0%20%D0%B2%20%D0%90%D0%BB%D1%8C%D0%BF%D1%8B/bull1.jpg">
                        <img
                            src="https://kovertrip.b-cdn.net/%D0%94%D0%B2%D1%83%D1%85%D0%B4%D0%BD%D0%B5%D0%B2%D0%BA%D0%B0%20%D0%B2%20%D0%90%D0%BB%D1%8C%D0%BF%D1%8B/redbull_hangar.png">
                    </div>
                    <div class="content">
                        <div class="m-booking-block" style="border-color:rgba(255,255,255,0.2);">
                            <div class="m-rating-row">
                                <div class="m-rating-val" style="background:#4285F4; border-radius:4px;">4.8</div>
                                <span style="font-weight:bold; color:white;">Google Maps</span>
                                <span style="color:#888; font-size:12px;">15,000+ –æ—Ç–∑—ã–≤–æ–≤</span>
                            </div>
                        </div>

                        <p class="m-article-text">
                            –î–∞–∂–µ –µ—Å–ª–∏ —Ç—ã –Ω–µ —Ñ–∞–Ω–∞—Ç –≥–æ–Ω–æ–∫, —ç—Ç–æ –º–µ—Å—Ç–æ —Ç–µ–±—è –≤–ø–µ—á–∞—Ç–ª–∏—Ç.
                            –ñ–∏–≤–æ–π –º—É–∑–µ–π —ç–Ω–µ—Ä–≥–∏–∏ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏.
                        </p>

                        <div class="m-article-h">üèé –ü—Ä–∏–∫–æ—Å–Ω–∏—Å—å –∫ –ª–µ–≥–µ–Ω–¥–µ</div>
                        <p class="m-article-text">
                            –ë–æ–ª–∏–¥—ã –§–æ—Ä–º—É–ª—ã-1, —Å—Ç–æ—è—â–∏–µ –∑–¥–µ—Å—å, –≤—ã–∏–≥—Ä—ã–≤–∞–ª–∏ —á–µ–º–ø–∏–æ–Ω–∞—Ç—ã. –°–∞–º–æ–ª–µ—Ç—ã The Flying Bulls
                            –¥–æ —Å–∏—Ö –ø–æ—Ä —É—á–∞—Å—Ç–≤—É—é—Ç –≤ –∞–≤–∏–∞—à–æ—É.
                            <br><br>
                            –≠—Ç–æ –º–µ—Å—Ç–æ –∑–∞—Ä—è–∂–∞–µ—Ç —ç–Ω–µ—Ä–≥–∏–µ–π –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è. –ó–¥–µ—Å—å –ø–æ–Ω–∏–º–∞–µ—à—å, —á—Ç–æ –Ω–µ—Ç –Ω–∏—á–µ–≥–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ–≥–æ.
                            –ò–¥–µ–∞–ª—å–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è –¥–ª—è –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏—Ö —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ.
                        </p>

                        <div class="m-quote-card">
                            "–≠—Ç–æ –º–µ—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∏ –∞–≤–∏–∞—Ü–∏–∏, –∏—Å–∫—É—Å—Å—Ç–≤–∞ –∏ –∫—É–ª–∏–Ω–∞—Ä–∏–∏. –ó–¥–µ—Å—å –≤—Å—ë –ø—Ä–æ–ø–∏—Ç–∞–Ω–æ –¥—É—Ö–æ–º –ø–æ–±–µ–¥—ã –∏
                            —Å–∫–æ—Ä–æ—Å—Ç–∏."
                        </div>
                    </div>
                </div>
            </div>

            <!-- Card 5: Salzburg -->
            <div class="m-story-card" onclick="openPopup('salzburg')">
                <img src="https://kovertrip.b-cdn.net/%D0%94%D0%B2%D1%83%D1%85%D0%B4%D0%BD%D0%B5%D0%B2%D0%BA%D0%B0%20%D0%B2%20%D0%90%D0%BB%D1%8C%D0%BF%D1%8B/salzburg_city.png"
                    class="m-story-img" alt="Salzburg">
                <div class="m-story-overlay">
                    <span class="m-story-tag">–ì–æ—Ä–æ–¥</span>
                    <h3 class="m-story-title">–ó–∞–ª—å—Ü–±—É—Ä–≥</h3>
                    <p class="m-story-desc">–≠—Å—Ç–µ—Ç–∏–∫–∞ —Å—Ç–∞—Ä–æ–π –ï–≤—Ä–æ–ø—ã. –ö–æ—Ñ–µ, –º—É–∑—ã–∫–∞ –∏ —Å—Ç–∏–ª—å.</p>
                    <div class="m-story-btn">–ü–æ–¥—Ä–æ–±–Ω–µ–µ &rarr;</div>
                </div>
                <div class="popup-data" id="data-salzburg" style="display:none;">
                    <div class="title">–ö–ª–∞—Å—Å–∏–∫–∞ –∏ –°—Ç–∏–ª—å</div>
                    <div class="subtitle">UNESCO ¬∑ –ú–æ—Ü–∞—Ä—Ç ¬∑ –ö–æ—Ñ–µ</div>
                    <div class="images">
                        <img
                            src="https://kovertrip.b-cdn.net/%D0%94%D0%B2%D1%83%D1%85%D0%B4%D0%BD%D0%B5%D0%B2%D0%BA%D0%B0%20%D0%B2%20%D0%90%D0%BB%D1%8C%D0%BF%D1%8B/salzburg_city.png">
                    </div>
                    <div class="content">
                        <p class="m-article-text">
                            –ú—ã –Ω–µ –±—É–¥–µ–º –±–µ–≥–∞—Ç—å –ø–æ –¥–∞—Ç–∞–º –∏ –ø–∞–º—è—Ç–Ω–∏–∫–∞–º. –≠—Ç–æ –ø–æ–µ–∑–¥–∫–∞ –ø—Ä–æ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ.
                        </p>

                        <div class="m-article-h">‚òïÔ∏è Dolce Vita –ø–æ-–∞–≤—Å—Ç—Ä–∏–π—Å–∫–∏</div>
                        <p class="m-article-text">
                            –ü—Ä–æ–π–¥–µ–º—Å—è –ø–æ —Å–∞–¥–∞–º –ú–∏—Ä–∞–±–µ–ª—å –∏ –∑–∞–≥–ª—è–Ω–µ–º –≤ —Å—Ç–∞—Ä–µ–π—à—É—é –∫–æ—Ñ–µ–π–Ω—é <b>Tomaselli</b> (–∑–¥–µ—Å—å –ª—é–±–∏–ª
                            –±—ã–≤–∞—Ç—å –ú–æ—Ü–∞—Ä—Ç).
                            <br><br>
                            –ü–æ–ø—Ä–æ–±—É–µ–º –Ω–∞—Å—Ç–æ—è—â–∏–π "–ó–∞—Ö–µ—Ä" –∏–ª–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–µ—Ç—ã <i>Mozartkugel</i> –≤ —Å–∏–Ω–µ–π –æ–±–µ—Ä—Ç–∫–µ –æ—Ç
                            F√ºrst.
                            –≠—Ç–æ —Å—Ç–∏–ª—å–Ω–∞—è —Ñ–∏–Ω–∞–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ —Ç–≤–æ–µ–≥–æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –ø–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º –¥–æ–º–æ–π.
                        </p>
                    </div>
                </div>
            </div>

            <div style="min-width: 1px;"></div>
            <!-- Spacer -->
        </div>

        <!-- POPUP COMPONENT -->
        <div id="m-popup" class="m-popup-overlay" onclick="closePopup()">
            <div class="m-popup-sheet" onclick="event.stopPropagation()">
                <!-- Close Button -->
                <div class="m-close-round" onclick="closePopup()">&times;</div>

                <!-- Gallery Slider -->
                <div class="m-gallery-container">
                    <div class="m-gallery-scroll" id="gallery-track">
                        <!-- Images injected by JS -->
                    </div>
                    <div class="m-photo-count" id="photo-counter">
                        üì∑ 1/5
                    </div>
                    <div class="m-gallery-dots" id="gallery-dots">
                        <!-- Dots injected by JS -->
                    </div>
                </div>

                <div class="m-popup-content">
                    <div class="m-sheet-header">
                        <div class="m-sheet-handle"></div>
                    </div>
                    <h3 id="popup-title" class="m-popup-title">Title</h3>
                    <div id="popup-subtitle" class="m-popup-subtitle">Subtitle</div>
                    <div id="popup-text"></div> <!-- HTML Container -->

                    <button onclick="closePopup()" class="m-sticky-close">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function openPopup(id) {
            const dataDiv = document.getElementById('data-' + id);
            if (!dataDiv) return;

            // 1. Get Text Data
            const title = dataDiv.querySelector('.title').innerText;
            const subtitle = dataDiv.querySelector('.subtitle') ? dataDiv.querySelector('.subtitle').innerText : '';
            // Get InnerHTML for the content to support rich text
            const content = dataDiv.querySelector('.content').innerHTML;

            document.getElementById('popup-title').innerText = title;
            document.getElementById('popup-subtitle').innerText = subtitle;
            document.getElementById('popup-text').innerHTML = content;

            // 2. Build Gallery
            const images = dataDiv.querySelectorAll('.images img');
            const track = document.getElementById('gallery-track');
            const dotsContainer = document.getElementById('gallery-dots');

            track.innerHTML = '';
            dotsContainer.innerHTML = '';

            images.forEach((img, index) => {
                // Add Image
                const imgEl = document.createElement('img');
                imgEl.src = img.src;
                imgEl.className = 'm-gallery-img';
                track.appendChild(imgEl);

                // Add Dot (only if > 1 image)
                if (images.length > 1) {
                    const dot = document.createElement('div');
                    dot.className = 'm-dot' + (index === 0 ? ' active' : '');
                    dotsContainer.appendChild(dot);
                }
            });

            // 3. Setup Scroll Listener for Dots
            if (images.length > 1) {
                track.onscroll = () => {
                    const scrollLeft = track.scrollLeft;
                    const width = track.offsetWidth;
                    const index = Math.round(scrollLeft / width);

                    // Update dots
                    const dots = dotsContainer.querySelectorAll('.m-dot');
                    dots.forEach(d => d.classList.remove('active'));
                    if (dots[index]) dots[index].classList.add('active');

                    // Update counter
                    document.getElementById('photo-counter').innerText = `üì∑ ${index + 1}/${images.length}`;
                };

                // Init counter
                document.getElementById('photo-counter').innerText = `üì∑ 1/${images.length}`;
                document.getElementById('photo-counter').style.display = 'flex';
            } else {
                document.getElementById('photo-counter').style.display = 'none';
            }

            // Show
            document.getElementById('m-popup').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closePopup() {
            document.getElementById('m-popup').classList.remove('active');
            document.body.style.overflow = '';

            // Stop any playing video when closing popup
            const videos = document.querySelectorAll('video');
            videos.forEach(v => v.pause());
        }

        function toggleVideo(el) {
            const video = el.querySelector('video');

            if (video.paused) {
                // Pause others
                document.querySelectorAll('video').forEach(v => {
                    if (v !== video) {
                        v.pause();
                        v.closest('.m-card-video')?.classList.remove('playing');
                    }
                });

                video.muted = false;
                video.play();
                el.classList.add('playing');
            } else {
                video.pause();
                el.classList.remove('playing');
            }
        }
    </script>


<!-- SOURCE: –î–≤—É—Ö–¥–Ω–µ–≤–∫–∞ –≤ –ê–ª—å–ø—ã/Mobile_Version/03_Reviews_Mobile.html -->


    <div class="m-reviews-section">
        <div class="m-reviews-header">
            <h2 class="m-reviews-title">–ñ–∏–≤—ã–µ –æ—Ç–∑—ã–≤—ã</h2>
            <p class="m-reviews-subtitle">–ò—Å—Ç–æ—Ä–∏–∏ —Ç–µ—Ö, –∫—Ç–æ —É–∂–µ —Å—ä–µ–∑–¥–∏–ª</p>
        </div>

        <div class="m-reviews-scroll">

            <!-- Review 1 -->
            <div class="m-review-card" onclick="toggleReviewVideo(this)">
                <video class="m-review-video"
                    src="https://vz-244f7910-31a.b-cdn.net/65d3dc36-a6b1-4fd1-b59b-bc595c64d3f2/play_720p.mp4"
                    playsinline loop muted preload="metadata"></video>

                <!-- Explicit IMG Poster -->
                <img class="m-review-poster-img"
                    src="https://video.bunnycdn.com/library/581522/videos/65d3dc36-a6b1-4fd1-b59b-bc595c64d3f2/thumbnail.jpg"
                    alt="Review Cover 1">

                <div class="m-review-overlay">
                    <div class="m-review-author">
                        <div class="m-review-avatar">–ê</div>
                        <div class="m-review-name">–ê–Ω—è</div>
                    </div>
                    <div class="m-review-quote">"–°–ø–æ–Ω—Ç–∞–Ω–Ω–æ —Å–æ—Ä–≤–∞–ª–∏—Å—å –∏ —ç—Ç–æ –±—ã–ª–æ –ª—É—á—à–µ–µ —Ä–µ—à–µ–Ω–∏–µ! –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –Ω–∞ –≤—ã—Å–æ—Ç–µ."
                    </div>
                </div>
                <div class="m-review-play">
                    <svg class="m-play-icon" viewBox="0 0 24 24">
                        <path d="M8 5v14l11-7z" />
                    </svg>
                </div>
            </div>

            <!-- Review 2 -->
            <div class="m-review-card" onclick="toggleReviewVideo(this)">
                <video class="m-review-video"
                    src="https://vz-244f7910-31a.b-cdn.net/1f30615c-3b0a-449f-93cb-f9a64dbe4abc/play_720p.mp4"
                    playsinline loop muted preload="metadata"></video>

                <img class="m-review-poster-img"
                    src="https://video.bunnycdn.com/library/581522/videos/1f30615c-3b0a-449f-93cb-f9a64dbe4abc/thumbnail.jpg"
                    alt="Review Cover 2">

                <div class="m-review-overlay">
                    <div class="m-review-author">
                        <div class="m-review-avatar" style="background:#29B6F6;">–ú</div>
                        <div class="m-review-name">–ú–∞–∫—Å–∏–º</div>
                    </div>
                    <div class="m-review-quote">"–°–∞–Ω–∏ ‚Äî –ø—Ä–æ—Å—Ç–æ –ø—É—à–∫–∞! –ù–µ –æ–∂–∏–¥–∞–ª —Ç–∞–∫–æ–≥–æ –¥—Ä–∞–π–≤–∞. –í—Å–µ–º —Å–æ–≤–µ—Ç—É—é."</div>
                </div>
                <div class="m-review-play">
                    <svg class="m-play-icon" viewBox="0 0 24 24">
                        <path d="M8 5v14l11-7z" />
                    </svg>
                </div>
            </div>

            <!-- Review 3 -->
            <div class="m-review-card" onclick="toggleReviewVideo(this)">
                <video class="m-review-video"
                    src="https://vz-244f7910-31a.b-cdn.net/3ee8bc4d-418e-4428-be72-264c4190a3e8/play_720p.mp4"
                    playsinline loop muted preload="metadata"></video>

                <img class="m-review-poster-img"
                    src="https://video.bunnycdn.com/library/581522/videos/3ee8bc4d-418e-4428-be72-264c4190a3e8/thumbnail.jpg"
                    alt="Review Cover 3">

                <div class="m-review-overlay">
                    <div class="m-review-author">
                        <div class="m-review-avatar" style="background:#FF6B35;">–ö</div>
                        <div class="m-review-name">–ö–∞—Ç—è</div>
                    </div>
                    <div class="m-review-quote">"–û—Ç–µ–ª—å —à–∏–∫–∞—Ä–Ω—ã–π, –±–∞—Å—Å–µ–π–Ω –Ω–∞ —É–ª–∏—Ü–µ –∑–∏–º–æ–π ‚Äî —ç—Ç–æ –ª—é–±–æ–≤—å!"</div>
                </div>
                <div class="m-review-play">
                    <svg class="m-play-icon" viewBox="0 0 24 24">
                        <path d="M8 5v14l11-7z" />
                    </svg>
                </div>
            </div>

        </div>
    </div>

    <script>
        function toggleReviewVideo(el) {
            const video = el.querySelector('video');
            if (!video) return;

            if (video.paused) {
                // Pause all other videos
                document.querySelectorAll('video').forEach(v => {
                    if (v !== video) {
                        v.pause();
                        v.closest('.m-review-card')?.classList.remove('playing');
                    }
                });

                video.muted = false; // Unmute
                var promise = video.play();
                
                if (promise !== undefined) {
                    promise.then(_ => {
                        // Play started
                        el.classList.add('playing');
                    }).catch(error => {
                        // Auto-play was prevented
                        console.log("Play failed", error);
                    });
                } else {
                     el.classList.add('playing');
                }

            } else {
                video.pause();
                el.classList.remove('playing');
            }
        }
    </script>

<!-- SOURCE: –î–≤—É—Ö–¥–Ω–µ–≤–∫–∞ –≤ –ê–ª—å–ø—ã/Mobile_Version/09_OrgDetails_Mobile.html -->


    <div class="m-org-section">
        <div class="m-org-header">
            <h2 class="m-org-title">–í—Å—ë –ø—Ä–æ–¥—É–º–∞–Ω–æ –¥–æ –º–µ–ª–æ—á–µ–π</h2>
        </div>

        <!-- Included -->
        <div class="m-info-card accent">
            <div class="m-info-h">
                <span>–í–∫–ª—é—á–µ–Ω–æ</span>
                <div style="text-align:right;">
                    <span class="m-price-tag">4990 KC</span>
                    <div style="font-size:10px; color:#888; margin-top:4px;">–í—ã–≥–æ–¥–Ω–µ–µ, —á–µ–º —Å–∞–º–æ–º—É</div>
                </div>
            </div>
            <ul class="m-list">
                <li class="check">–ö–æ–º—Ñ–æ—Ä—Ç–Ω—ã–π —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä —Ç—É–¥–∞-–æ–±—Ä–∞—Ç–Ω–æ</li>
                <li class="check">–ü—Ä–æ–∂–∏–≤–∞–Ω–∏–µ –≤ –æ—Ç–µ–ª–µ 4*</li>
                <li class="check">–ó–∞–≤—Ç—Ä–∞–∫ (—Ñ–µ—Ä–º–µ—Ä—Å–∫–∏–π —à–≤–µ–¥—Å–∫–∏–π —Å—Ç–æ–ª)</li>
                <li class="check">3 —ç–∫—Å–∫—É—Ä—Å–∏–∏ (–ì–∞–ª—å—à—Ç–∞—Ç, –ó–∞–ª—å—Ü–±—É—Ä–≥, –ú—É–∑–µ–π)</li>
                <li class="check">SPA –∑–æ–Ω–∞ (–±–∞—Å—Å–µ–π–Ω, —Å–∞—É–Ω–∞)</li>
                <li class="check">–°–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ –≥–∏–¥–æ–≤ 24/7</li>
                <li class="check">–§–æ—Ç–æ–æ—Ç—á–µ—Ç –ø–æ–µ–∑–¥–∫–∏</li>
            </ul>
        </div>

        <!-- Extra -->
        <div class="m-info-card">
            <div class="m-info-h">
                <span>–ù–∞ –∫–∞—Ä–º–∞–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã</span>
            </div>
            <ul class="m-list">
                <li>–í–µ—á–µ—Ä–Ω–∏–π —Å–∫–∏-–ø–∞—Å—Å: 23‚Ç¨</li>
                <li>–ü—Ä–æ–∫–∞—Ç —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã—Ö —Å–∞–Ω–µ–π: 10‚Ç¨</li>
                <li>–û–±–µ–¥—ã –∏ —É–∂–∏–Ω—ã</li>
            </ul>
        </div>

        <!-- Clothing -->
        <div class="m-info-card">
            <div class="m-info-h">
                <span>–ß—Ç–æ –Ω–∞–¥–µ—Ç—å?</span>
            </div>
            <p class="m-info-text">
                –û–¥–µ–≤–∞–π—Å—è —É–¥–æ–±–Ω–æ –∏ —Ç–µ–ø–ª–æ! –ò–¥–µ–∞–ª—å–Ω–æ ‚Äî –ª—ã–∂–Ω—ã–π –∫–æ—Å—Ç—é–º –∏–ª–∏ –Ω–µ–ø—Ä–æ–º–æ–∫–∞–µ–º—ã–µ —à—Ç–∞–Ω—ã + –∫—É—Ä—Ç–∫–∞.
                <br><br>
                –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ: –ø–µ—Ä—á–∞—Ç–∫–∏, —à–∞–ø–∫–∞, —à–∞—Ä—Ñ –∏ —É–¥–æ–±–Ω–∞—è –∑–∏–º–Ω—è—è –æ–±—É–≤—å.
            </p>
        </div>

        <div class="m-float-spacer"></div>
    </div>

    <button onclick="openWidget()" class="m-float-cta">
        –ó–∞–Ω—è—Ç—å –º–µ—Å—Ç–æ
    </button>


</div><!-- END WRAPPER -->
<!-- SOURCE: –î–≤—É—Ö–¥–Ω–µ–≤–∫–∞ –≤ –ê–ª—å–ø—ã/Widget_Config.html -->

<!-- SOURCE: –î–≤—É—Ö–¥–Ω–µ–≤–∫–∞ –≤ –ê–ª—å–ø—ã/Widget_Core.html -->


    <!-- Admin Config removed. Use external T123 block with window.KOVER_WIDGET_CONFIG -->

    <!-- Hidden trigger, logic handled via #book-now hash -->
    <button class="open-modal-btn" onclick="openWidget()">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –º–µ—Å—Ç–æ</button>

    <div class="modal-overlay" id="widget-overlay">
        <div class="widget-container" id="widget-card">

            <!-- HEADER -->
            <div class="widget-header">
                <div class="stepper" id="stepper">
                    <div class="step-item active" id="step-ind-1">
                        <div class="step-circle">1</div>
                        <span>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã</span>
                    </div>
                    <div class="step-item" id="step-ind-2">
                        <div class="step-circle">2</div>
                        <span>–£—á–∞—Å—Ç–Ω–∏–∫–∏</span>
                    </div>
                    <div class="step-item" id="step-ind-3">
                        <div class="step-circle">3</div>
                        <span>–û–ø–ª–∞—Ç–∞</span>
                    </div>
                </div>
                <div class="close-btn" onclick="closeWidget()">‚úï</div>
            </div>

            <!-- BODY: SCROLLABLE CONTENT -->
            <div class="widget-body" id="widget-body">

                <!-- STEP 1: CONFIG -->
                <div class="step-slide active" id="slide-1">
                    <h2>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–µ–∑–¥–∫–∏</h2>

                    <div style="margin-bottom: 24px;">
                        <div class="plan-card selected" id="opt-full" onclick="selectPlan('full')">
                            <div style="display:flex; align-items:flex-start;">
                                <div class="radio-circle"></div>
                                <div>
                                    <div style="font-weight:600; font-size:16px; margin-bottom: 2px;">–û–ø–ª–∞—Ç–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é
                                    </div>
                                    <div style="font-size:13px; color:#86868b;">–ë–µ–∑ –¥–æ–ø–ª–∞—Ç –≤ –±—É–¥—É—â–µ–º</div>
                                </div>
                            </div>
                            <div style="font-weight:700; font-size:16px;" id="price-full-display">...</div>
                        </div>

                        <div class="plan-card" id="opt-deposit" onclick="selectPlan('deposit')">
                            <div style="display:flex; align-items:flex-start;">
                                <div class="radio-circle"></div>
                                <div>
                                    <div style="font-weight:600; font-size:16px; margin-bottom: 2px;">–í–Ω–µ—Å—Ç–∏ –∑–∞–ª–æ–≥</div>
                                    <div style="font-size:13px; color:#86868b;">–û—Å—Ç–∞—Ç–æ–∫ <span id="remain-val">...</span>
                                        –ø–æ–∑–∂–µ</div>
                                </div>
                            </div>
                            <div style="font-weight:700; font-size:16px;" id="price-depo-display">...</div>
                        </div>
                    </div>

                    <div class="counter-row">
                        <span class="counter-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</span>
                        <div class="counter-ctrl">
                            <div class="c-btn" onclick="updateCount(-1)">‚Äì</div>
                            <div class="c-val" id="count-val">1</div>
                            <div class="c-btn" onclick="updateCount(1)">+</div>
                        </div>
                    </div>

                    <div style="margin-top:20px; font-size:14px; color:#86868b; text-align:center;">
                        –û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: <span id="summ-total" style="font-weight:700; color:#1d1d1f;">...</span>
                    </div>
                </div>

                <!-- STEP 2: PASSENGERS -->
                <div class="step-slide" id="slide-2">
                    <h2>–£—á–∞—Å—Ç–Ω–∏–∫–∏</h2>
                    <div id="passengers-container"></div>

                    <div style="margin-top: 24px; padding-top: 20px; border-top: 1px solid #e5e5ea;">
                        <div style="display:flex; gap:10px; align-items:flex-start;">
                            <input type="checkbox" id="consent-chk"
                                style="margin-top:4px; transform:scale(1.2); accent-color:var(--color-accent);">
                            <label for="consent-chk" style="font-size:13px; color:#666; line-height:1.4;">
                                –Ø –ø—Ä–∏–Ω–∏–º–∞—é <a href="#"
                                    onclick="event.preventDefault(); document.getElementById('terms-popup').classList.add('active');"
                                    style="color:#007aff; text-decoration:none; border-bottom:1px solid rgba(0,122,255,0.3);">—É—Å–ª–æ–≤–∏—è</a>
                                –∏ –ø–æ–ª–∏—Ç–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
                            </label>
                        </div>
                    </div>
                </div>

                <!-- STEP 3: PAYMENT -->
                <div class="step-slide" id="slide-3" style="display:flex; flex-direction:column; height:100%;">
                    <h2>–û–ø–ª–∞—Ç–∞</h2>

                    <!-- LOADING OVERLAY -->
                    <div id="payment-loader" class="visible">
                        <div class="vibey-loader"></div>
                        <div style="font-size:18px; font-weight:600; color:#1d1d1f; margin-bottom: 8px;">–ó–∞–≥—Ä—É–∂–∞–µ–º
                            –º–∞–≥–∏—é...</div>
                        <div style="font-size:14px; color:#86868b;">–°–µ–∫—É–Ω–¥–æ—á–∫—É, –≤—Å—ë –≥–æ—Ç–æ–≤–∏–º –¥–ª—è –≤–∞—Å</div>
                    </div>

                    <div id="stripe-mount-point" style="flex:1; display:flex; flex-direction:column;">

                        <!-- WALLET SECTION -->
                        <div id="wallet-container" style="display:none; margin-bottom: 24px;">
                            <div id="wallet-element" style="height: 48px;"></div>
                            <div style="display:flex; align-items:center; margin: 20px 0;">
                                <div style="flex:1; height:1px; background:#e5e5ea;"></div>
                                <div style="padding:0 10px; font-size:13px; color:#86868b; font-weight:500;">–ò–õ–ò –ö–ê–†–¢–û–ô
                                </div>
                                <div style="flex:1; height:1px; background:#e5e5ea;"></div>
                            </div>
                        </div>

                        <!-- CARD SECTION -->
                        <div class="form-group" style="margin-bottom:24px;">
                            <div class="form-label" style="margin-left:4px;">–ë–ê–ù–ö–û–í–°–ö–ê–Ø –ö–ê–†–¢–ê</div>
                            <div id="card-element" class="stripe-box" style="padding: 12px 16px;">
                                <!-- Stripe Element injects here -->
                            </div>
                            <div id="payment-message" style="
                                margin-top: 12px; 
                                padding: 12px; 
                                background: #fff0f0; 
                                color: var(--color-error); 
                                font-size: 13px; 
                                border-radius: 12px; 
                                display: none;
                                line-height: 1.4;
                            "></div>
                        </div>

                        <!-- SUMMARY CARD -->
                        <div style="background:#f2f2f7; border-radius:16px; padding:16px; margin-bottom:20px;">
                            <div
                                style="display:flex; justify-content:space-between; margin-bottom:8px; font-size:14px; color:#666;">
                                <span>–ö –æ–ø–ª–∞—Ç–µ —Å–µ–π—á–∞—Å</span>
                                <span style="font-weight:600; color:#000;" id="pay-now-val">...</span>
                            </div>
                            <div style="display:flex; justify-content:space-between; font-size:13px; color:#86868b;">
                                <span>–¢–∏–ø –æ–ø–ª–∞—Ç—ã</span>
                                <span id="payment-type-label">...</span>
                            </div>
                        </div>

                        <!-- SECURE BADGE (Bottom) -->
                        <div style="margin-top:auto; text-align:center; padding-top:20px; padding-bottom:10px;">
                            <div style="display:inline-flex; align-items:center; gap:6px; opacity:0.6;">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="#666"
                                    stroke-width="2.5">
                                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                </svg>
                                <span style="font-size:11px; color:#666; font-weight:500;">–ü–ª–∞—Ç–µ–∂–∏ –∑–∞—â–∏—â–µ–Ω—ã
                                    Stripe</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SUCCESS STATE -->
                <div class="step-slide" id="slide-success">
                    <div style="text-align:center; padding: 20px 20px 40px 20px;">
                        <div style="font-size:60px; color:#34c759; margin-bottom:20px;">‚úì</div>
                        <h2>–û–ø–ª–∞—Ç–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ!</h2>
                        <p style="color:#666; margin-bottom:24px; line-height:1.5;">
                            –ú—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞ <span id="success-email"
                                style="font-weight:600; color:#000;"></span>.
                        </p>
                        <div id="success-message-dynamic"
                            style="font-size:15px; color:#1d1d1f; line-height:1.6; margin-bottom: 24px;"></div>

                        <a href="#" target="_blank" id="tg-join-btn" class="btn-primary"
                            style="text-decoration:none; display:flex; align-items:center; justify-content:center; background-color:#2AABEE; margin-bottom:12px;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg" style="margin-right:8px;">
                                <path
                                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-0.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.48-1.02-2.4-1.63-1.06-.7-0.37-1.09 0.23-1.72 0.16-.16 2.87-2.63 2.93-2.85 0.01-.03 0.01-.15-.06-.21-.07-.06-.18-.04-.26-.02-.11.02-1.92 1.22-5.43 3.59-.51.35-.98.52-1.39.51-.46-.01-1.33-.26-1.98-.47-.8-.26-1.43-.4-1.37-.84.03-.23.35-.46.96-.71 3.77-1.64 6.28-2.72 7.53-3.24 3.58-1.48 4.32-1.74 3.8-1.74z"
                                    fill="white" />
                            </svg>
                            –í—Å—Ç—É–ø–∏—Ç—å –≤ —á–∞—Ç –ø–æ–µ–∑–¥–∫–∏
                        </a>
                    </div>
                </div>

            </div>

            <!-- FOOTER: ACTIONS -->
            <div class="widget-footer" id="widget-footer">
                <button class="btn-primary" id="btn-next-action" onclick="handleNextClick()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
                <button class="btn-secondary" id="btn-back-action" onclick="handleBackClick()"
                    style="display:none;">–ù–∞–∑–∞–¥</button>
            </div>
        </div>
    </div>

    <!-- TERMS POPUP -->
    <div class="modal-overlay" id="terms-popup" style="z-index: 10001;">
        <div class="widget-container" style="height: 80%; max-height: 600px;">
            <div class="widget-header">
                <h3 style="margin:0; font-size:18px;">–£—Å–ª–æ–≤–∏—è</h3>
                <div class="close-btn" onclick="document.getElementById('terms-popup').classList.remove('active')">‚úï
                </div>
            </div>
            <div class="widget-body" style="padding: 24px; overflow-y: auto;">
                <h4 style="margin-top:0; margin-bottom:12px;">Souhlas se zpracov√°n√≠m osobn√≠ch √∫daj≈Ø (GDPR)</h4>
                <p style="font-size:13px; color:#333; line-height:1.6;">
                    V souladu s Na≈ô√≠zen√≠m Evropsk√©ho parlamentu a Rady (EU) 2016/679 o ochranƒõ fyzick√Ωch osob v
                    souvislosti se zpracov√°n√≠m osobn√≠ch √∫daj≈Ø a o voln√©m pohybu tƒõchto √∫daj≈Ø (d√°le jen "GDPR")
                    potvrzuji, ≈æe jsem se sezn√°mil(a) s podm√≠nkami zpracov√°n√≠ osobn√≠ch √∫daj≈Ø.
                </p>
                <p style="font-size:13px; color:#333; line-height:1.6;">
                    <strong>1. Spr√°vce √∫daj≈Ø:</strong> Kover Travel<br>
                    <strong>2. √öƒçel zpracov√°n√≠:</strong> Osobn√≠ √∫daje (jm√©no, p≈ô√≠jmen√≠, datum narozen√≠, e-mail, telefon)
                    jsou shroma≈æƒèov√°ny a zpracov√°v√°ny v√Ωhradnƒõ za √∫ƒçelem poskytov√°n√≠ slu≈æeb cestovn√≠ho ruchu, vy≈ô√≠zen√≠
                    rezervace, komunikace s klientem a plnƒõn√≠ z√°konn√Ωch povinnost√≠.<br>
                    <strong>3. Doba uchov√°n√≠:</strong> √ödaje budou uchov√°v√°ny po dobu nezbytnƒõ nutnou k plnƒõn√≠ √∫ƒçelu
                    smlouvy a dle z√°konn√Ωch lh≈Øt.<br>
                    <strong>4. Va≈°e pr√°va:</strong> M√°te pr√°vo na p≈ô√≠stup k √∫daj≈Øm, jejich opravu, v√Ωmaz ("pr√°vo b√Ωt
                    zapomenut"), omezen√≠ zpracov√°n√≠ a pr√°vo vzn√©st n√°mitku.
                </p>
                <p style="font-size:13px; color:#666;">
                    Va≈°e √∫daje nejsou bez va≈°eho souhlasu p≈ôed√°v√°ny t≈ôet√≠m stran√°m, s v√Ωjimkou partner≈Ø nezbytn√Ωch pro
                    realizaci slu≈æby (nap≈ô. ubytovac√≠ za≈ô√≠zen√≠, dopravci, poji≈°≈•ovny).
                </p>
                <button class="btn-primary" onclick="document.getElementById('terms-popup').classList.remove('active')"
                    style="margin-top:20px;">Rozum√≠m / Zav≈ô√≠t</button>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script src="https://js.stripe.com/v3/"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://npmcdn.com/flatpickr/dist/l10n/ru.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/intlTelInput.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/utils.js"></script>

    <script>
        // --- CONFIG (DEFAULTS) ---
        let CONFIG = {
            id: 'default_tour',
            name: 'Default Tour',
            date: '01.01.2025',
            price: 100, // Non-zero default for Apple Pay testing
            deposit: 100,
            stripeKey: 'pk_live_51SE6PPDcw9kAY89HfWvBpSfQqQ4BvbF5D9cEOkQ1DC5YNK5HARwuhhWZzTEQA6WCoATixBmkEJ8eTbpVUyw96wK0001cNUyYD6',
            webhook: '',
            tourType: 'Tour',
            telegram_link: ''
        };

        // --- STATE ---
        let state = {
            step: 1,
            count: 1,
            plan: 'full', // 'full' | 'deposit'
            passengers: [],
            contact: { email: '', phone: '' },
            clientSecret: null // Store secret securely here
        };

        let paymentIntentPromise = null;

        function invalidatePaymentIntent() {
            state.clientSecret = null;
            paymentIntentPromise = null;
        }

        let stripe, elements, cardElement, prButton;
        let iti;

        // --- INIT ---
        function initWidgetCore() {
            // 1. Try to load config from window (in case it was loaded later)
            if (window.KOVER_WIDGET_CONFIG) {
                CONFIG = { ...CONFIG, ...window.KOVER_WIDGET_CONFIG };
            }

            // Set prices
            const pFull = document.getElementById('price-full-display');
            if (pFull) pFull.innerText = CONFIG.price + " Kƒç";
            const pDepo = document.getElementById('price-depo-display');
            if (pDepo) pDepo.innerText = CONFIG.deposit + " Kƒç";
            const pRem = document.getElementById('remain-val');
            if (pRem) {
                const parts = CONFIG.date.split('.');
                const tDate = new Date(parts[2], parts[1] - 1, parts[0]);

                // --- 12 DAYS CHECK ---
                const now = new Date();
                const diffTime = tDate - now;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

                if (diffDays < 12) {
                    // Less than 12 days: Hide Deposit Option entirely
                    const depoOpt = document.getElementById('opt-deposit');
                    if (depoOpt) {
                        depoOpt.style.display = 'none';
                    }
                    // Force full plan if deposit was somehow default or selected
                    state.plan = 'full';
                    document.getElementById('opt-full').classList.add('selected');
                    // Also maybe change label of full option?
                }

                // Balance due date logic (existing)
                tDate.setDate(tDate.getDate() - 10);
                const dStr = String(tDate.getDate()).padStart(2, '0') + '.' + String(tDate.getMonth() + 1).padStart(2, '0') + '.' + tDate.getFullYear();
                pRem.parentElement.innerHTML = `–û—Å—Ç–∞—Ç–æ–∫ <span style="color:#007aff; font-weight:700;">${(CONFIG.price - CONFIG.deposit)} Kƒç</span> –¥–æ ${dStr}`;
            }

            updateSummary();
            // Check if Stripe is loaded
            if (typeof Stripe !== 'undefined') {
                stripe = Stripe(CONFIG.stripeKey);
            } else {
                console.error('Stripe JS not loaded yet');
            }


            // Hash Trigger Check
            checkHash();
            window.addEventListener('hashchange', checkHash);

            // Link Trigger Check
            document.body.addEventListener('click', (e) => {
                const link = e.target.closest('a');
                if (link && link.getAttribute('href') === '#book-now') {
                    e.preventDefault();
                    openWidget();
                }
            });

            // --- STRIPE RETURN HANDLING ---
            const urlParams = new URLSearchParams(window.location.search);
            const redirectStatus = urlParams.get('redirect_status');
            const clientSecret = urlParams.get('payment_intent_client_secret');

            if (redirectStatus && clientSecret) {
                // Restore state to get email/passenger data back
                loadStateFromStorage();

                // Open widget immediately
                document.getElementById('widget-overlay').classList.add('active');
                document.body.style.overflow = 'hidden';

                if (redirectStatus === 'succeeded') {
                    // Go to success
                    goToStep(4, true);
                    // Clear storage
                    sessionStorage.removeItem('kover_widget_state');
                } else {
                    // Failed
                    goToStep(3, true);
                    const msg = document.getElementById('payment-message');
                    if (msg) {
                        msg.innerText = "–û–ø–ª–∞—Ç–∞ –Ω–µ –±—ã–ª–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.";
                        msg.style.display = 'block';
                    }
                }
            }
        }

        // Execute Init
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initWidgetCore);
        } else {
            initWidgetCore();
        }

        // --- STORAGE HELPERS ---
        function saveStateToStorage() {
            try {
                sessionStorage.setItem('kover_widget_state', JSON.stringify(state));
            } catch (e) { console.error('Save state error', e); }
        }

        function loadStateFromStorage() {
            try {
                const s = sessionStorage.getItem('kover_widget_state');
                if (s) {
                    const parsed = JSON.parse(s);
                    // Merge safely
                    state = { ...state, ...parsed };
                    // Restore inputs if needed? 
                    // Since we jump to Step 4 (Success) or Step 3 (Payment), we might not need to re-fill Step 1/2 inputs visually 
                    // unless user goes "Back". 
                    // Ideally we should re-populate if they go back. 
                    // But 'state' object is the source of truth for rendering.
                    // If we go to Step 3, initPayment uses state object.
                    // If we go back to Step 2, renderPassengers uses state object. 
                    // So we are good!
                }
            } catch (e) { console.error('Load state error', e); }
        }

        function checkHash() {
            if (window.location.hash === '#book-now') {
                openWidget();
            }
        }

        // --- NAVIGATION CONTROLLER ---
        async function goToStep(step, force = false) {
            if (step === state.step && !force) return;
            const direction = step > state.step ? 'next' : 'prev';

            // Logic: Destroy Stripe if leaving step 3
            if (state.step === 3 && step !== 3) {
                destroyStripe();
            }

            // PRE-RENDER content before animation starts
            if (step === 2) {
                renderPassengers();
                // preloadPaymentData(); removed to ensure we send full data later
            }

            // Update UI State (Slides)
            const currentSlide = document.getElementById(state.step === 4 ? 'slide-success' : `slide-${state.step}`);
            const nextSlide = document.getElementById(step === 4 ? 'slide-success' : `slide-${step}`);

            document.querySelectorAll('.step-slide').forEach(s => {
                s.classList.remove('active', 'slide-enter-next', 'slide-exit-next', 'slide-enter-prev', 'slide-exit-prev');
                if (s !== currentSlide && s !== nextSlide) s.style.display = 'none';
            });

            if (force) {
                nextSlide.classList.add('active');
                nextSlide.style.display = 'block';
            } else {
                currentSlide.classList.add('active');
                nextSlide.classList.add('active');
                nextSlide.style.display = 'block';

                if (direction === 'next') {
                    currentSlide.classList.add('slide-exit-next');
                    nextSlide.classList.add('slide-enter-next');
                } else {
                    currentSlide.classList.add('slide-exit-prev');
                    nextSlide.classList.add('slide-enter-prev');
                }

                setTimeout(() => {
                    currentSlide.classList.remove('active', 'slide-exit-next', 'slide-exit-prev');
                    nextSlide.classList.remove('slide-enter-next', 'slide-enter-prev'); // cleanup
                    currentSlide.style.display = 'none';
                    nextSlide.classList.add('active');
                    // Reset scroll
                    const slide = nextSlide;
                    if (slide) slide.scrollTop = 0;
                }, 380);
            }

            state.step = step;

            // Initialize Payment AFTER slide is visible (Crucial for Apple Pay)
            if (step === 3) initPayment();

            if (step === 4) {
                // Update Telegram Link from CONFIG
                const tgBtn = document.getElementById('tg-join-btn');
                if (tgBtn && CONFIG.telegram_link) {
                    tgBtn.href = CONFIG.telegram_link;
                }

                const msgEl = document.getElementById('success-message-dynamic');
                if (msgEl) {
                    if (state.plan === 'deposit') {
                        msgEl.innerHTML = `–í –ø–∏—Å—å–º–µ –≤—ã —Ç–∞–∫–∂–µ –Ω–∞–π–¥–µ—Ç–µ —Å—Å—ã–ª–∫—É –¥–ª—è <strong>–¥–æ–ø–ª–∞—Ç—ã –æ—Å—Ç–∞—Ç–∫–∞</strong>.`;
                    } else {
                        msgEl.innerHTML = `–í –ø–∏—Å—å–º–µ –≤—ã –Ω–∞–π–¥–µ—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ –≤ Telegram-—á–∞—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.`;
                    }
                }
            }

            updateFooterAndStepper();
        }

        function updateFooterAndStepper() {
            // Stepper
            if (state.step < 4) {
                document.getElementById('stepper').style.visibility = 'visible';
                for (let i = 1; i <= 3; i++) {
                    const el = document.getElementById(`step-ind-${i}`);
                    if (i === state.step) {
                        el.classList.add('active');
                        el.classList.remove('completed');
                        el.querySelector('.step-circle').innerText = i;
                    } else if (i < state.step) {
                        el.classList.remove('active');
                        el.classList.add('completed');
                        el.querySelector('.step-circle').innerText = '‚úì';
                    } else {
                        el.classList.remove('active', 'completed');
                        el.querySelector('.step-circle').innerText = i;
                    }
                }
            } else {
                document.getElementById('stepper').style.visibility = 'hidden';
            }

            // Footer Buttons
            const btnNext = document.getElementById('btn-next-action');
            const btnBack = document.getElementById('btn-back-action');

            if (state.step === 1) {
                btnNext.innerText = '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å';
                btnBack.style.display = 'none';
            } else if (state.step === 2) {
                btnNext.innerText = '–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ';
                btnBack.style.display = 'block';
                btnBack.innerText = '–ù–∞–∑–∞–¥ –∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º';
            } else if (state.step === 3) {
                const price = state.plan === 'full' ? CONFIG.price : CONFIG.deposit;
                const total = price * state.count;
                // Button text dynamically set
                btnNext.innerText = `–û–ø–ª–∞—Ç–∏—Ç—å ${total} Kƒç`;
                btnBack.style.display = 'block';
                btnBack.innerText = '–ù–∞–∑–∞–¥ –∫ –≤–≤–æ–¥—É –¥–∞–Ω–Ω—ã—Ö';
            } else if (state.step === 4) {
                btnNext.innerText = '–ó–∞–∫—Ä—ã—Ç—å';
                btnBack.style.display = 'none';
            }

            btnNext.disabled = false;
        }

        function handleNextClick() {
            if (state.step === 1) {
                goToStep(2);
            } else if (state.step === 2) {
                if (validateStep2()) {
                    invalidatePaymentIntent(); // Force fresh data send
                    goToStep(3);
                }
            } else if (state.step === 3) {
                confirmPayment();
            } else if (state.step === 4) {
                closeWidget(); // Close on success
            }
        }

        function handleBackClick() {
            if (state.step === 2) goToStep(1);
            else if (state.step === 3) goToStep(2);
        }

        function openWidget() {
            document.getElementById('widget-overlay').classList.add('active');
            document.body.style.overflow = 'hidden';
            goToStep(1, true);
        }

        function closeWidget() {
            if (state.step === 4) {
                // Reset if closed after success
                setTimeout(() => { goToStep(1, true); }, 500);
            }
            document.getElementById('widget-overlay').classList.remove('active');
            document.body.style.overflow = '';
            // Remove hash if present so it can be re-triggered
            setTimeout(() => {
                if (window.location.hash === '#book-now') {
                    history.pushState("", document.title, window.location.pathname + window.location.search);
                }
            }, 100);
            setTimeout(destroyStripe, 300);
        }

        // --- STEP 1 LOGIC ---
        function selectPlan(plan) {
            state.plan = plan;
            invalidatePaymentIntent();
            document.getElementById('opt-full').classList.toggle('selected', plan === 'full');
            document.getElementById('opt-deposit').classList.toggle('selected', plan === 'deposit');
            updateSummary();
        }

        function updateCount(delta) {
            const n = state.count + delta;
            if (n >= 1 && n <= 10) {
                state.count = n;
                invalidatePaymentIntent();
                document.getElementById('count-val').innerText = n;
                updateSummary();
            }
        }

        function updateSummary() {
            const price = state.plan === 'full' ? CONFIG.price : CONFIG.deposit;
            const total = price * state.count;
            document.getElementById('summ-total').innerText = `${total} Kƒç`;
        }

        // --- STEP 2 LOGIC ---
        function renderPassengers() {
            const container = document.getElementById('passengers-container');
            container.innerHTML = '';

            for (let i = 0; i < state.count; i++) {
                const p = state.passengers[i] || { name: '', surname: '', dob: '' };
                const div = document.createElement('div');
                div.className = 'form-group';
                div.innerHTML = `
                    <div style="font-weight:700; margin-bottom:12px; margin-top:24px;">–£—á–∞—Å—Ç–Ω–∏–∫ ${i + 1}</div>
                    <div style="display:grid; grid-template-columns:1fr 1fr; gap:16px;">
                        <input class="inp-field p-name" id="p-name-${i}" data-idx="${i}" placeholder="–ò–º—è (Latin)" value="${p.name}" autocomplete="given-name">
                        <input class="inp-field p-surname" id="p-surname-${i}" data-idx="${i}" placeholder="–§–∞–º–∏–ª–∏—è" value="${p.surname}" autocomplete="family-name">
                    </div>
                     <!-- Hidden error containers -->
                    <div style="display:grid; grid-template-columns:1fr 1fr; gap:16px;">
                        <input type="hidden" class="err-name-dummy"> 
                        <div class="input-error-msg err-name" style="grid-column: 1;">–¢–æ–ª—å–∫–æ –ª–∞—Ç–∏–Ω–∏—Ü–∞</div>
                        <div class="input-error-msg err-surname" style="grid-column: 2;">–¢–æ–ª—å–∫–æ –ª–∞—Ç–∏–Ω–∏—Ü–∞</div>
                    </div>

                    <!-- FLATPICKR INPUT -->
                    <input class="inp-field p-dob" id="p-dob-${i}" data-idx="${i}" 
                           placeholder="–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è (–î–î.–ú–ú.–ì–ì–ì–ì)" value="${p.dob}" 
                           style="margin-top:24px;" autocomplete="bday">
                    
                    <div class="input-error-msg err-dob-format">–í–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—É</div>
                    <div class="input-error-msg err-dob-age" style="color: #ff9500; display: none;">
                        –î–µ–π—Å—Ç–≤—É—é—Ç –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –¥–µ—Ç–µ–π –¥–æ 7 –ª–µ—Ç, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –≤ –∏–Ω—Å—Ç–∞–≥—Ä–∞–º
                    </div>
                `;
                container.appendChild(div);
            }

            const contactDiv = document.createElement('div');
            contactDiv.style.borderTop = '1px solid #e5e5ea';
            contactDiv.style.paddingTop = '16px';
            contactDiv.style.marginTop = '24px';
            contactDiv.innerHTML = `
                <div class="form-label" style="font-weight:600; color:#000;">–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</div>
                <div class="form-group">
                    <input type="email" id="inp-email" class="inp-field" placeholder="Email" value="${state.contact.email}" autocomplete="email">
                    <div class="input-error-msg">–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π Email</div>
                </div>
                <div class="form-group">
                    <input type="tel" id="inp-phone" class="inp-field" value="${state.contact.phone}" autocomplete="tel">
                    <div class="input-error-msg">–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä</div>
                </div>
            `;
            container.appendChild(contactDiv);

            // --- LISTENERS ---

            // Name/Surname Logic
            const setupTextInputs = (selector, nextSelector) => {
                container.querySelectorAll(selector).forEach((inp, idx) => {
                    inp.addEventListener('input', (e) => {
                        const isName = selector.includes('name');
                        const errSel = isName ? '.err-name' : '.err-surname';
                        // Validation
                        const err = inp.parentElement.nextElementSibling.querySelector(errSel);
                        if (/[^a-zA-Z\s-]/.test(inp.value)) {
                            inp.classList.add('error');
                            if (err) err.style.display = 'block';
                        } else {
                            inp.classList.remove('error');
                            if (err) err.style.display = 'none';
                        }
                        saveState2();
                    });

                    inp.addEventListener('blur', (e) => {
                        capitalize(e.target);
                        saveState2();
                    });

                    // Auto-Jump on Enter
                    inp.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter') {
                            e.preventDefault();
                            const next = document.getElementById(nextSelector.replace('${i}', idx));
                            if (next) next.focus();
                        }
                    });
                });
            };

            setupTextInputs('.p-name', 'p-surname-${i}');
            setupTextInputs('.p-surname', 'p-dob-${i}');

            // FLATPICKR INIT
            container.querySelectorAll('.p-dob').forEach((inp) => {
                if (typeof flatpickr !== 'undefined') {
                    const idx = inp.getAttribute('data-idx');
                    const pVal = state.passengers[idx] ? state.passengers[idx].dob : '';

                    flatpickr(inp, {
                        locale: "ru",
                        dateFormat: "d.m.Y",
                        disableMobile: true,
                        allowInput: true,
                        defaultDate: pVal || undefined, // Keep empty if no value
                        onOpen: function (selectedDates, dateStr, instance) {
                            if (selectedDates.length === 0) {
                                instance.jumpToDate("01.01.2000"); // Jump to 2000 view without setting value
                            }
                        },
                        onClose: function (selectedDates, dateStr, instance) {
                            checkAge(instance.element);
                            saveState2();
                        }
                    });
                }

                inp.addEventListener('blur', (e) => { checkAge(e.target); saveState2(); });
                inp.addEventListener('input', (e) => { saveState2(); });
            });

            // Phone
            const phoneEl = document.getElementById('inp-phone');
            if (iti) iti.destroy();
            iti = window.intlTelInput(phoneEl, {
                utilsScript: "https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/utils.js",
                initialCountry: "cz",
                preferredCountries: ["cz", "ua", "ru"],
                autoPlaceholder: "aggressive",
                separateDialCode: true
            });

            // Logic to strip country code if autofilled (e.g. +420)
            const cleanPhoneInput = () => {
                const data = iti.getSelectedCountryData();
                const dialCode = data.dialCode;
                let val = phoneEl.value;
                // Check for +Code prefix (e.g. +420)
                if (val.startsWith('+' + dialCode)) {
                    phoneEl.value = val.substring(dialCode.length + 1).trim();
                }
            };

            phoneEl.addEventListener('input', () => {
                cleanPhoneInput();
                saveState2();
            });

            phoneEl.addEventListener('blur', () => {
                cleanPhoneInput();
                if (!iti.isValidNumber()) {
                    phoneEl.classList.add('error');
                } else {
                    phoneEl.classList.remove('error');
                    // Smooth scroll to consent
                    const chk = document.getElementById('consent-chk');
                    if (chk) {
                        chk.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }

                    // PRELOAD PAYMENT DATA NOW to avoid Apple Pay race conditions
                    // Capture current inputs to state so payload is valid
                    saveState2();
                    if (state && state.contact) state.contact.phone = iti.getNumber(); // Ensure full number
                    // preloadPaymentData(); removed
                }
                saveState2();
            });

            // Email
            document.getElementById('inp-email').addEventListener('blur', (e) => {
                const val = e.target.value;
                if (val && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(val)) e.target.classList.add('error');
                else e.target.classList.remove('error');
                saveState2();
            });
        }

        function checkAge(el) {
            const val = el.value;
            const ageMsg = el.nextElementSibling.nextElementSibling; // .err-dob-age
            const fmtMsg = el.nextElementSibling; // .err-dob-format

            // Basic parsing DD.MM.YYYY
            if (!val || val.length < 10) {
                // If typed partially, don't show error yet unless blurred?
                return false;
            }

            const parts = val.split('.');
            if (parts.length < 3) return false;

            const day = parseInt(parts[0], 10);
            const month = parseInt(parts[1], 10);
            const year = parseInt(parts[2], 10);

            const dob = new Date(year, month - 1, day);
            const now = new Date();

            if (dob.getFullYear() === year && dob.getMonth() === month - 1 && dob.getDate() === day) {
                el.classList.remove('error');
                fmtMsg.style.display = 'none';

                // Age Logic
                let age = now.getFullYear() - dob.getFullYear();
                const m = now.getMonth() - dob.getMonth();
                if (m < 0 || (m === 0 && now.getDate() < dob.getDate())) {
                    age--;
                }

                if (age < 7) {
                    ageMsg.style.display = 'block';
                    el.classList.add('error');
                    return false; // Invalid age
                } else {
                    ageMsg.style.display = 'none';
                    el.classList.remove('error');
                    return true;
                }
            } else {
                // Invalid date format
                // Don't error aggressively while typing, but if full length exists:
                if (val.length >= 10) {
                    el.classList.add('error');
                    fmtMsg.style.display = 'block';
                }
                return false;
            }
        }

        function capitalize(el) {
            if (el.value) el.value = el.value.charAt(0).toUpperCase() + el.value.slice(1);
        }

        function saveState2() {
            state.passengers = [];
            document.querySelectorAll('.p-name').forEach((el, i) => {
                const s = document.getElementById(`p-surname-${i}`);
                const d = document.getElementById(`p-dob-${i}`);
                state.passengers[i] = {
                    name: el.value,
                    surname: s ? s.value : '',
                    dob: d ? d.value : ''
                };
            });
            const em = document.getElementById('inp-email');
            if (em) state.contact.email = em.value;
            if (iti) state.contact.phone = iti.getNumber();
        }

        function validateStep2() {
            saveState2();
            let isValid = true;
            const err = (el) => { el.classList.add('error'); el.classList.add('shake'); setTimeout(() => el.classList.remove('shake'), 400); isValid = false; };

            // Check Passengers
            document.querySelectorAll('.p-name').forEach(el => { if (el.value.length < 2 || /[^a-zA-Z\s-]/.test(el.value)) err(el); else el.classList.remove('error'); });
            document.querySelectorAll('.p-surname').forEach(el => { if (el.value.length < 2 || /[^a-zA-Z\s-]/.test(el.value)) err(el); else el.classList.remove('error'); });

            // DOB Check
            document.querySelectorAll('.p-dob').forEach(el => {
                // If empty or invalid age
                if (!checkAge(el)) {
                    // Check if empty
                    if (!el.value) {
                        el.classList.add('error');
                        el.nextElementSibling.style.display = 'block';
                    }
                    err(el);
                }
            });

            // Check Email
            const emailEl = document.getElementById('inp-email');
            if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailEl.value)) err(emailEl); else emailEl.classList.remove('error');

            // Check Phone
            const phoneEl = document.getElementById('inp-phone');
            if (!iti.isValidNumber()) err(phoneEl); else phoneEl.classList.remove('error');

            // Check content
            const chk = document.getElementById('consent-chk');
            if (!chk.checked) { chk.parentElement.style.color = 'red'; isValid = false; } else chk.parentElement.style.color = '';

            return isValid;
        }

        // --- STEP 3 LOGIC (PAYMENT) ---

        function buildPaymentPayload(price, total) {
            let paxSummary = [];
            state.passengers.forEach(p => paxSummary.push(`${p.name} ${p.surname}`));

            const payload = {
                order_id: `${CONFIG.id}_${Date.now()}_${Math.random().toString(36).substr(2, 5)}`,
                timestamp: new Date().toISOString(),
                device_type: "Experimental Widget",
                browser_userAgent: navigator.userAgent,
                browser_language: navigator.language || navigator.userLanguage,
                browser_platform: navigator.platform,
                screen_resolution: `${window.screen.width}x${window.screen.height}`,
                viewport_size: `${window.innerWidth}x${window.innerHeight}`,
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                referrer: document.referrer || "Direct",
                page_url: window.location.href,
                connection_type: navigator.connection ? navigator.connection.effectiveType : 'unknown',
                tour_name: CONFIG.name,
                tour_date: CONFIG.date,
                passengers: paxSummary.join(', '),
                contact_name: state.contact.name,
                contact_email: state.contact.email,
                contact_phone: state.contact.phone,
                count: state.count,
                plan: state.plan,
                tour_id: CONFIG.id,
                tour_type: CONFIG.tourType,
                passenger_count: state.count,
                selected_seats: "–ë–µ–∑ –≤—ã–±–æ—Ä–∞ –º–µ—Å—Ç",
                payment_type: state.plan === 'full' ? '–ü–æ–ª–Ω–∞—è –æ–ø–ª–∞—Ç–∞' : '–ó–∞–ª–æ–≥',
                currency: "CZK",
                locale: "ru",
                buyer_phone: state.contact.phone,
                widget_open_method: window.location.hash === '#book-now' ? 'Hash Trigger' : 'Button Click',
                passengers_json_dump: JSON.stringify(state.passengers),
                total_pay_now: total,
                total_order_value: CONFIG.price * state.count,
                remaining_balance: state.plan === 'full' ? 0 : (CONFIG.price - CONFIG.deposit) * state.count,
                seats_surcharge: 0,
                buyer_email: state.contact.email,
                productName: CONFIG.name,
                all_passengers_summary: paxSummary.join(', '),
                telegram_link: CONFIG.telegram_link
            };

            state.passengers.forEach((p, i) => {
                payload[`passenger_${i + 1}_firstname`] = p.name;
                payload[`passenger_${i + 1}_lastname`] = p.surname;
                payload[`passenger_${i + 1}_name`] = `${p.name} ${p.surname}`;
                payload[`passenger_${i + 1}_dob`] = p.dob;
            });

            return payload;
        }

        function preloadPaymentData() {
            if (state.clientSecret || paymentIntentPromise) return;

            const price = state.plan === 'full' ? CONFIG.price : CONFIG.deposit;
            const total = price * state.count;
            const payload = buildPaymentPayload(price, total);

            console.log("Preloading payment data...");
            paymentIntentPromise = fetch(CONFIG.webhook, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            })
                .then(r => r.json())
                .catch(e => {
                    console.warn("Preload failed", e);
                    return null;
                });
        }

        async function initPayment() {

            // 1. Force Loader Visible IMMEDIATELY
            const loader = document.getElementById('payment-loader');
            loader.classList.add('visible');
            loader.style.opacity = '1';

            // 2. Prepare visual details behind loader
            const price = state.plan === 'full' ? CONFIG.price : CONFIG.deposit;
            const total = price * state.count;

            const payNowEl = document.getElementById('pay-now-val');
            if (payNowEl) payNowEl.innerText = total + " Kƒç";

            const typeLabel = document.getElementById('payment-type-label');
            if (typeLabel) typeLabel.innerText = state.plan === 'full' ? "–ü–æ–ª–Ω–∞—è –æ–ø–ª–∞—Ç–∞" : "–ó–∞–ª–æ–≥";

            // 3. Elements Initialization 
            if (!elements) {
                try {
                    let data;
                    if (state.clientSecret) {
                        data = { clientSecret: state.clientSecret };
                    } else {
                        if (!paymentIntentPromise) {
                            const payload = buildPaymentPayload(price, total);
                            paymentIntentPromise = fetch(CONFIG.webhook, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) }).then(r => r.json());
                        }
                        data = await paymentIntentPromise;
                    }

                    if (data && data.clientSecret) {
                        state.clientSecret = data.clientSecret;
                        state.orderId = data.Order_id || data.order_id;

                        elements = stripe.elements({
                            clientSecret: data.clientSecret,
                            appearance: {
                                theme: 'stripe',
                                variables: {
                                    fontFamily: 'Inter, system-ui, sans-serif',
                                    fontSizeBase: '16px',
                                    colorPrimary: '#007aff',
                                    colorText: '#1d1d1f',
                                    borderRadius: '12px',
                                    colorDanger: '#ff3b30'
                                }
                            }
                        });

                        cardElement = elements.create('card', {
                            hidePostalCode: true,
                            style: {
                                base: {
                                    fontSize: '16px',
                                    color: '#1d1d1f',
                                    '::placeholder': { color: '#86868b' },
                                    iconColor: '#007aff'
                                }
                            }
                        });
                        cardElement.mount('#card-element');

                        // Wait slightly for mount to settle and keep loader for vibes
                        setTimeout(() => {
                            loader.style.opacity = '0';
                            setTimeout(() => { loader.classList.remove('visible'); }, 300);
                        }, 1000);

                        // Payment Request check...
                        console.log("Initializing Payment Request with total:", total);
                        const pr = stripe.paymentRequest({
                            country: 'CZ', currency: 'czk',
                            total: { label: CONFIG.name, amount: Math.round(total * 100) },
                            requestPayerName: true, requestPayerEmail: true
                        });

                        // LISTENER FOR APPLE/GOOGLE PAY EVENTS
                        pr.on('paymentmethod', async (ev) => {
                            const { paymentIntent, error: confirmError } = await stripe.confirmCardPayment(
                                state.clientSecret,
                                { payment_method: ev.paymentMethod.id },
                                { handleActions: false }
                            );

                            if (confirmError) {
                                ev.complete('fail');
                                const msg = document.getElementById('payment-message');
                                msg.innerText = confirmError.message || "–û—à–∏–±–∫–∞ –æ–ø–ª–∞—Ç—ã";
                                msg.style.display = 'block';
                            } else {
                                ev.complete('success');
                                if (paymentIntent.status === "requires_action") {
                                    saveStateToStorage();
                                    const { error } = await stripe.confirmCardPayment(state.clientSecret, {
                                        return_url: window.location.href
                                    });
                                    if (error) {
                                        const msg = document.getElementById('payment-message');
                                        msg.innerText = error.message;
                                        msg.style.display = 'block';
                                    } else {
                                        document.getElementById('success-email').innerText = state.contact.email;
                                        goToStep(4);
                                    }
                                } else {
                                    document.getElementById('success-email').innerText = state.contact.email;
                                    goToStep(4);
                                }
                            }
                        });

                        pr.canMakePayment().then(result => {
                            console.log("Apple/Google Pay Availability:", result);
                            if (result) {
                                const wContainer = document.getElementById('wallet-container');
                                if (wContainer) {
                                    wContainer.style.display = 'block';
                                    wContainer.style.visibility = 'visible'; // Force visibility
                                    wContainer.style.opacity = '1';
                                }

                                prButton = elements.create('paymentRequestButton', {
                                    paymentRequest: pr,
                                    style: {
                                        paymentRequestButton: {
                                            theme: 'dark', // or 'dark-outline'
                                            height: '48px',
                                            type: 'buy'
                                        }
                                    }
                                });
                                prButton.mount('#wallet-element');
                            } else {
                                console.log("Apple/Google Pay not available");
                                const wContainer = document.getElementById('wallet-container');
                                if (wContainer) wContainer.style.display = 'none';
                                const wEl = document.getElementById('wallet-element');
                                if (wEl) wEl.style.display = 'none';
                            }
                        });

                    } else {
                        console.error('No clientSecret received from webhook');
                        alert('Error: Could not initialize payment (No Secret).');
                        loader.classList.remove('visible');
                    }
                } catch (e) {
                    console.error("Init Payment Error:", e);
                    // ALERT FOR MOBILE DEBUGGING
                    alert("Pay Init Error: " + e.message);
                    loader.classList.remove('visible');
                }
            } else {
                // Already initialized (coming back from step 4 or similar, re-show loader briefly)
                setTimeout(() => {
                    loader.style.opacity = '0';
                    setTimeout(() => { loader.classList.remove('visible'); }, 300);
                }, 1000);
            }
        }

        function destroyStripe() {
            if (cardElement) { try { cardElement.destroy(); } catch (e) { } cardElement = null; }
            if (prButton) { try { prButton.destroy(); } catch (e) { } prButton = null; }
            if (elements) { elements = null; }

            const cardEl = document.getElementById('card-element');
            if (cardEl) cardEl.innerHTML = '';

            const walletEl = document.getElementById('wallet-element');
            if (walletEl) walletEl.innerHTML = '';

            const walletContainer = document.getElementById('wallet-container');
            if (walletContainer) walletContainer.style.display = 'none';

            state.clientSecret = null;
            if (typeof paymentIntentPromise !== 'undefined') paymentIntentPromise = null;
            console.log("Stripe destroyed & Cache cleared");
        }

        async function confirmPayment() {
            if (!state.clientSecret) {
                alert("–û—à–∏–±–∫–∞: –ü–ª–∞—Ç—ë–∂–Ω–∞—è —Å–µ—Å—Å–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.");
                return;
            }

            const btn = document.getElementById('btn-next-action');
            const msg = document.getElementById('payment-message');
            msg.style.display = 'none';

            btn.disabled = true;
            btn.innerText = '–û–±—Ä–∞–±–æ—Ç–∫–∞...';

            saveStateToStorage();

            const { error } = await stripe.confirmCardPayment(state.clientSecret, {
                payment_method: {
                    card: cardElement,
                    billing_details: {
                        name: state.contact.email,
                        email: state.contact.email,
                        phone: state.contact.phone
                    }
                },
                receipt_email: state.contact.email, // Explicitly set for Dashboard visibility
                return_url: window.location.href
            });

            if (error) {
                msg.innerText = error.message;
                msg.style.display = 'block';
                msg.classList.add('shake'); setTimeout(() => msg.classList.remove('shake'), 500);

                btn.disabled = false;
                const price = state.plan === 'full' ? CONFIG.price : CONFIG.deposit;
                const total = price * state.count;
                btn.innerText = `–û–ø–ª–∞—Ç–∏—Ç—å ${total} Kƒç`;
            } else {
                // Success
                document.getElementById('success-email').innerText = state.contact.email;
                goToStep(4);
            }
        }

    </script>
